<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--<meta http-equiv="pragma" content="no-cache">-->
    <META HTTP-EQUIV="pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Cache-Control" CONTENT="no-store, must-revalidate">
    <META HTTP-EQUIV="expires" CONTENT="Wed, 26 Feb 1997 08:21:57 GMT">
    <META HTTP-EQUIV="expires" CONTENT="0">
    <title>万达筑云项目管理平台</title>
    <link rel="styleSheet" href="./libs/jquery/jquery.mCustomScrollbar.css" />
    <script type="text/javascript">
        var App = {};
        //缓存全局属性
        App.Global = {
            module: null
        };
        App.modules = {};
        App.pkg = {};
        App.time = +new Date();
    </script>
    <script>
        document.write('<link rel="styleSheet" href="/static/dist/comm/comm_20160313.css?t=' + App.time + '"/>');
    </script>
    <link rel="styleSheet" href="./libsH5/css/modelStyle.less" />
    <link rel="styleSheet" href="./topNav/css/topNav.less" />
    <link rel="stylesheet" href="./bodyContent/css/bottomBar.less" />
    <link href="../../../favico.ico" rel="shortcut icon" />
</head>

<body>
    <div id="topBar">
        <ul class="navHeader">
            <li class="item bodyConMenu">
                <a href="#bodyContent" data-i18n="data.nav.home"></a>
            </li>
            <!--  <li class="item todo"> <a href="#todo">待办</a></li> -->
            <li class="item projects">
                <a href="#projects" data-i18n="data.nav.model"></a>
            </li>
            <li class="item flow">
                <a href="#flow" data-i18n="data.nav.process"></a>
            </li>
            <li class="item resources">
                <a href="#resources" data-i18n="data.nav.resources"></a>
            </li>
            <li class="item services">
                <a href="#services" data-i18n="data.nav.service"></a>
            </li>
            <li class="user">
                <img class="userBg hoverClass" src="/topNav/images/user.png">
                <span class="hoverClass" data-i18n="data.nav.hello;[title]"></span>
                <span id="loginName" class="userName hoverClass ellipsis"></span>&nbsp;
                <i class="icon-angle-down hoverClass"></i>
            </li>
            <!--<li class="imbox"><a href="#inbox" target="_blank"><i></i><span id='messageCount'></span></a></li>-->
            <li class="lang">
                <span data-i18n="data.system.lang">简体中文</span>&nbsp;
                <i class="icon-angle-down hoverClass"></i>
                <div class="lang popup">
                    <span data-i18n="data.system.translate">
                        English
                    </span>
                    <!--<span>-->
                    <!--<a href="#inbox" target="_blank" data-i18n="data.system.messages">Français(<span class='messageCounter'></span>)</a>-->
                    <!--</span>-->
                </div>
            </li>
            <li class="videoIcon">
                <div id="meetingOpenAndmeetingCount">
                    <div id="meetingMsgCount"></div>
                    <div id="meetingOpen"></div>
                </div>
            </li>
            <li class="menuNav">
                <i class="image-online-more hoverClass"></i>
                <span class="edgeNum count">
                    <span class="messageCounter">0</span>
                </span>
            </li>
        </ul>
        <div class="logo">
            <span class="text"></span>
        </div>
    </div>
    <div id="contains"></div>
    <div id="pageLoading"></div>
    <div id="dataLoading"></div>
    <div id="modalWrapper"></div>
    <div class="userinfo">
        <div class="clearfix conatiner">
            <img id="uiLogo" src="" width="64px" height="85px">
            <div class="info">
                <table>
                    <tr>
                        <td class="labelName" data-i18n="[prepend]data.system.account;[title]">：</td>
                        <td id="uiAccount" class="overflowEllipsis" style="max-width: 100px;"></td>
                    </tr>
                    <tr>
                        <td class="labelName" data-i18n="[prepend]data.nav.title;[title]">：</td>
                        <td id="uiPosition" class="uiPosition"></td>
                    </tr>
                    <tr>
                        <td class="labelPhone" data-i18n="[prepend]data.nav.labelPhone;[title]">：</td>
                        <td id="labelPhone" class="uiPosition"></td>
                    </tr>
                    <tr>
                        <td class="labelName" data-i18n="[prepend]data.system.departments;[title]">：</td>
                        <td id="uiPartment" class="uiPosition"></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="tool">
            <a id="btn_modifyPassword" href="" target="_blank" style="float:left;margin-left:10px;" data-i18n="data.nav.m-p"></a>
            <a href="#/logout" data-i18n="data.nav.exit"></a>
        </div>
    </div>

    <div class="onlineNav system">
        <ul>
            <li>
                <i class="osIcon pic_6"></i>
                <span>
                    <a href="#inbox" target="_blank">
                        <span-i data-i18n="data.system.messages"></span-i>(
                        <span class='messageCounter'></span>)</a>
                </span>
            </li>
            <!-- <li id="indexSuggestItem">
            <i class="osIcon pic_3"></i>
            <span data-i18n="data.system.feedback">
            </span>
        </li> -->
            <li id="myTrain">
                <i class="osIcon pic_14"></i>
                <span data-i18n="data.system.training"></span>
            </li>
            <li class="split">
                <div></div>
            </li>
            <li id="indexAuthenticationItem">
                <i class="osIcon pic_15"></i>
                <span data-i18n="data.source.CR"></span>
            </li>
            <li id="indexTrainingItem">
                <i class="osIcon pic_16"></i>
                <span data-i18n="data.system.t-m"></span>
            </li>
            <li class="split" id="indexTrainingAuthenItem">
                <div></div>
            </li>
            <li id="feed-back">
                <i class="osIcon pic_feed_back"></i>
                <span>
                    <a href="#adminFeedBack" target="_blank">
                        <div class="text" data-i18n="data.system.feedbackAdmin"></div>
                    </a>
                </span>
            </li>
            <li id="auth-auth">
                <i class="osIcon pic_4"></i>
                <span>
                    <a href="#services/auth" target="_blank">
                        <div class="text" data-i18n="data.system.permission"></div>
                    </a>
                </span>
            </li>
            <li id="auth-project">
                <i class="osIcon pic_10"></i>
                <span>
                    <a href="#services/project" target="_blank">
                        <div class="text" data-i18n="data.system.project"></div>
                    </a>
                </span>
            </li>
            <li id="auth-app">
                <i class="osIcon pic_11"></i>
                <span>
                    <a href="#services/application" target="_blank">
                        <div class="text" data-i18n="data.system.app"></div>
                    </a>
                </span>
            </li>
            <li id="auth-sys">
                <i class="osIcon pic_8"></i>
                <span>
                    <a href="#services/system" target="_blank">
                        <div class="text" data-i18n="data.system.system"></div>
                    </a>
                </span>
            </li>
            <li id="auth-log">
                <i class="osIcon pic_5"></i>
                <span>
                    <a href="#services/log" target="_blank">
                        <div class="text" data-i18n="data.system.log"></div>
                    </a>
                </span>
            </li>
        </ul>
    </div>
    <!--<script type="text/javascript">-->
    <!--var App = {};-->
    <!--//缓存全局属性-->
    <!--App.Global = {-->
    <!--module: null-->
    <!--};-->
    <!--App.modules = {};-->
    <!--App.pkg = {};-->
    <!--App.time = Math.round(Math.random() * 9999);-->

    <!--</script>-->
    <script type="text/javascript" src="./libs/underscore.1.8.2.js"></script>
    <script type="text/javascript" src="./api/api.js"></script>
    <link href="static/dist/editer/themes/default/css/umeditor.css" type="text/css" rel="stylesheet">
    <!-- <script type="text/javascript" src="static/dist/editer/third-party/jquery.min.js"></script> -->
    <script type="text/javascript" src="static/dist/editer/third-party/template.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="static/dist/editer/umeditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="static/dist/editer/umeditor.min.js"></script>
    <script type="text/javascript" src="static/dist/editer/lang/zh-cn/zh-cn.js"></script>
    <script>
        document.write('<script src="/static/dist/comm/comm_20160313.js?t=' + App.time + '"><' + '/script>')
    </script>
    <!--<script type="text/javascript" src="/static/dist/comm/comm_20160313.js?t=123"></script>-->
    <script type="text/javascript" src="./topNav/js/topNav.es6"></script>
    <script type="text/javascript" src="./commH5/pluging/clipboard/clipboard.js"></script>
    <script>
        var x = new XMLHttpRequest();
        x.open('GET', 'map.json?t=' + App.time, true);
        x.send('bb');
        x.onreadystatechange = function (s) {
            if (x.readyState == 4) {
                var r = x.response || x.responseText,
                    obj = JSON.parse(r),
                    pkg = obj.pkg,
                    index_js = document.createElement('script');
                for (var i in pkg) {
                    if (pkg[i]['uri']) {
                        //var url = pkg[i]['uri'].slice(0, pkg[i]['uri'].indexOf('_'));
                        var url = pkg[i]['uri'].slice(0, pkg[i]['uri'].indexOf('.'));
                        App.pkg[url + '.' + pkg[i]['type']] = pkg[i]['uri'];
                    }
                }
                index_js.setAttribute('src', __uri('./router/index.js'));
                document.body.appendChild(index_js);
            }
        };
    </script>


    <!-- <div id="meetingOpenAndmeetingCount"></div> -->

</body>

</html>
<script type="text/javascript">
    $(function () {
        if (App.Comm.getCookie("isDemoEnv") != "yes") {
            App.Comm.commentDragRenderHandle();//右侧拖拽按钮点击事件
        };
    })
    function setVideoHandle(videoId) {//设置视频参数的方法

        var _userInfo = JSON.parse(localStorage.getItem("user"));
        var _userinfoForVideo = "";
        var _temp = "";
        _userinfoForVideo = _userinfoForVideo + _userInfo.loginName + ",";
        _userinfoForVideo = _userinfoForVideo + " " + ",";
        _temp = _userInfo.org ? _userInfo.org[0].name : ' ';
        _userinfoForVideo = _userinfoForVideo + _temp + ',';
        _userinfoForVideo = _userinfoForVideo + _userInfo.name;
        try {
            loadParameter(videoId, 1, 1, 20, 1, 0, "", "", escape(_userinfoForVideo));
        }
        catch (e) {
            ;
        }
    }
    function addJsUrlHandle(jsUrl, type, callback) {//添加js脚本的方法
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = jsUrl;
        if (type == "body") {
            document.body.appendChild(script);
        } else if (type == "head") {
            document.head.appendChild(script);
        }
        if (script.readyState) {//IE
            script.onreadystatechange = function () {
                if (script.readyState == 'complete' || script.readyState == 'loaded') {
                    script.onreadystatechange = null;
                    callback();
                }
            }
        } else {//非IE
            script.onload = function () {
                callback();
            }
        }
    }
    function addCssUrlHandle(cssUrl, callback) {//添加css脚本的方法
        var script = document.createElement('link');
        script.rel = 'stylesheet';
        script.href = cssUrl;
        document.head.appendChild(script);
        if (script.readyState) {//IE
            script.onreadystatechange = function () {
                if (script.readyState == 'complete' || script.readyState == 'loaded') {
                    script.onreadystatechange = null;
                    callback();
                }
            }
        } else {//非IE
            script.onload = function () { callback(); }
        }
    }
    function getUrlVideoFun() {

        var xmlAjax = new XMLHttpRequest();
        xmlAjax.open("GET", 'platform/video/url', true);
        xmlAjax.send();
        xmlAjax.onreadystatechange = function () {
            if (xmlAjax.readyState == 4 && xmlAjax.status == 200) {
                var responseJosn = JSON.parse(xmlAjax.responseText);
                if (responseJosn.code !== 0) {
                    return;
                }
                var resObj = responseJosn.data[0].content;
                localStorage.setItem("meetingUrl", resObj.meetingPath);
                addJsUrlHandle(resObj.common, "body", function () {
                    console.log("加载统计代码完成了")
                })
                addCssUrlHandle(resObj.bootstrapMinCss, function () {//添加css脚本的方法
                    console.log("视频样式代码完成了")
                })
                addJsUrlHandle(resObj.layer, "body", function () {//添加js脚本的方法
                    addJsUrlHandle(resObj.meting1, "body", function () {//添加js脚本的方法
                        setVideoHandle(resObj.key);
                    });
                });
            }
        }
    }
    function loadMeetingMsgCount(count) {
        if (count == 0) {
            $("#meetingMsgCount").hide();
        }
    }
</script>