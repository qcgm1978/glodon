var CLOUD=CLOUD||{},o3dgc,S3D;CLOUD.WorkerId="20160708";o3dgc=function(){"use strict";function o(){var i,n,r;return(n=new ArrayBuffer(4),i=new Uint32Array(n),r=new Uint8Array(n),i[0]=1,r[0]===1)?t.O3DGC_LITTLE_ENDIAN:t.O3DGC_BIG_ENDIAN}function f(n,i,r,u){var o,h,e,c,l,f,s;for(o=-1,h=!1,c=i.m_value,l=0,e=l;e<c;++e)if(n.Equal(r[e].m_id)){h=!0;break}else if(n.Less(r[e].m_id)){for(i.m_value<t.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS&&++i.m_value,f=i.m_value-1;f>e;--f)for(r[f].m_id.m_a=r[f-1].m_id.m_a,r[f].m_id.m_b=r[f-1].m_id.m_b,r[f].m_id.m_c=r[f-1].m_id.m_c,s=0;s<u;++s)r[f].m_pred[s]=r[f-1].m_pred[s];r[e].m_id.m_a=n.m_a;r[e].m_id.m_b=n.m_b;r[e].m_id.m_c=n.m_c;o=e;h=!0;break}return!h&&i.m_value<t.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS&&(o=i.m_value++,r[o].m_id.m_a=n.m_a,r[o].m_id.m_b=n.m_b,r[o].m_id.m_c=n.m_c),o}function s(n,t){var u,i,r;u=Math.abs(n.m_x);i=Math.abs(n.m_y);r=Math.abs(n.m_z);r>=u&&r>=i?n.m_z>=0?(t.m_z=0,t.m_x=n.m_x,t.m_y=n.m_y):(t.m_z=1,t.m_x=-n.m_x,t.m_y=-n.m_y):i>=u&&i>=r?n.m_y>=0?(t.m_z=2,t.m_x=n.m_z,t.m_y=n.m_x):(t.m_z=3,t.m_x=-n.m_z,t.m_y=-n.m_x):n.m_x>=0?(t.m_z=4,t.m_x=n.m_y,t.m_y=n.m_z):(t.m_z=5,t.m_x=-n.m_y,t.m_y=-n.m_z)}function h(n){return n<0?-1-2*n:2*n}function i(n){return n&1?-(n+1>>>1):n>>>1}function r(t,i,r,u,e,o,s,h){for(var p,y,v,c,l=new n.SC3DMCTriplet(-1,-1,-1),a=0;a<3;++a)if(v=t[i*3+a],v<r&&(l.m_a=-1,l.m_b=-1,l.m_c=v,y=f(l,u,e,o),y!==-1))for(p=v*h,c=0;c<o;++c)e[y].m_pred[c]=s[p+c]}function e(t,i,r,u,e,o,s,h,c,l){var v,rt,ut,ft,et,a,y,b,k,p,d,ot,st,g,nt,tt,it,w;if(v=i*3,w=new n.SC3DMCTriplet(-1,-1,-1),t[v]===r?(a=t[v+1],y=t[v+2]):t[v+1]===r?(a=t[v],y=t[v+2]):(a=t[v],y=t[v+1]),a<r&&y<r)for(ot=c.Begin(a),st=c.End(a),g=ot;g<st;++g){if(nt=l[g],nt<0)break;for(rt=nt*3,b=-1,tt=!1,d=0;d<3;++d)k=t[rt+d],k===y?tt=!0:k<r&&k!==a&&(b=k);if(b!==-1&&tt&&(a<y?(w.m_a=a,w.m_b=y):(w.m_a=y,w.m_b=a),w.m_c=-b-1,it=f(w,u,e,o),it!==-1))for(ut=a*h,ft=y*h,et=b*h,p=0;p<o;++p)e[it].m_pred[p]=s[ut+p]+s[ft+p]-s[et+p]}}function c(t,i,r,u,f){var a,v,p,y,o,c,l,s,h,e;for(e=new n.Vec3,s=new n.Vec3,h=new n.Vec3,p=u*3,v=0;v<p;++v)f[v]=0;for(y=0;y<i;++y)a=y*3,o=t[a]*3,c=t[a+1]*3,l=t[a+2]*3,s.m_x=r[c]-r[o],s.m_y=r[c+1]-r[o+1],s.m_z=r[c+2]-r[o+2],h.m_x=r[l]-r[o],h.m_y=r[l+1]-r[o+1],h.m_z=r[l+2]-r[o+2],e.m_x=s.m_y*h.m_z-s.m_z*h.m_y,e.m_y=s.m_z*h.m_x-s.m_x*h.m_z,e.m_z=s.m_x*h.m_y-s.m_y*h.m_x,f[o]+=e.m_x,f[o+1]+=e.m_y,f[o+2]+=e.m_z,f[c]+=e.m_x,f[c+1]+=e.m_y,f[c+2]+=e.m_z,f[l]+=e.m_x,f[l+1]+=e.m_y,f[l+2]+=e.m_z}var n,t,u;return n={},t={},t.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL0=7,t.O3DGC_BINARY_STREAM_MAX_SYMBOL0=127,t.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL1=6,t.O3DGC_BINARY_STREAM_MAX_SYMBOL1=63,t.O3DGC_BINARY_STREAM_NUM_SYMBOLS_UINT32=5,t.O3DGC_BIG_ENDIAN=0,t.O3DGC_LITTLE_ENDIAN=1,t.O3DGC_MAX_DOUBLE=179769e303,t.O3DGC_MIN_LONG=-2147483647,t.O3DGC_MAX_LONG=2147483647,t.O3DGC_MAX_UCHAR8=255,t.O3DGC_MAX_TFAN_SIZE=256,t.O3DGC_MAX_ULONG=4294967295,t.O3DGC_SC3DMC_START_CODE=497,t.O3DGC_DV_START_CODE=498,t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES=256,t.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES=256,t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES=32,t.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS=2,t.O3DGC_SC3DMC_BINARIZATION_FL=0,t.O3DGC_SC3DMC_BINARIZATION_BP=1,t.O3DGC_SC3DMC_BINARIZATION_FC=2,t.O3DGC_SC3DMC_BINARIZATION_AC=3,t.O3DGC_SC3DMC_BINARIZATION_AC_EGC=4,t.O3DGC_SC3DMC_BINARIZATION_ASCII=5,t.O3DGC_STREAM_TYPE_UNKOWN=0,t.O3DGC_STREAM_TYPE_ASCII=1,t.O3DGC_STREAM_TYPE_BINARY=2,t.O3DGC_SC3DMC_NO_PREDICTION=0,t.O3DGC_SC3DMC_DIFFERENTIAL_PREDICTION=1,t.O3DGC_SC3DMC_XOR_PREDICTION=2,t.O3DGC_SC3DMC_ADAPTIVE_DIFFERENTIAL_PREDICTION=3,t.O3DGC_SC3DMC_CIRCULAR_DIFFERENTIAL_PREDICTION=4,t.O3DGC_SC3DMC_PARALLELOGRAM_PREDICTION=5,t.O3DGC_SC3DMC_SURF_NORMALS_PREDICTION=6,t.O3DGC_SC3DMC_ENCODE_MODE_QBCR=0,t.O3DGC_SC3DMC_ENCODE_MODE_SVA=1,t.O3DGC_SC3DMC_ENCODE_MODE_TFAN=2,t.O3DGC_DYNAMIC_VECTOR_ENCODE_MODE_LIFT=0,t.O3DGC_MIN_NEIGHBORS_SIZE=128,t.O3DGC_MIN_NUM_NEIGHBORS_SIZE=16,t.O3DGC_TFANS_MIN_SIZE_ALLOCATED_VERTICES_BUFFER=128,t.O3DGC_TFANS_MIN_SIZE_TFAN_SIZE_BUFFER=8,t.O3DGC_DEFAULT_VECTOR_SIZE=32,n.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_UNKOWN=0,n.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_POSITION=1,n.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_NORMAL=2,n.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_COLOR=3,n.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_TEXCOORD=4,n.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_WEIGHT=5,n.O3DGC_IFS_INT_ATTRIBUTE_TYPE_UNKOWN=0,n.O3DGC_IFS_INT_ATTRIBUTE_TYPE_INDEX=1,n.O3DGC_IFS_INT_ATTRIBUTE_TYPE_JOINT_ID=2,n.O3DGC_IFS_INT_ATTRIBUTE_TYPE_INDEX_BUFFER_ID=3,n.O3DGC_OK=0,n.O3DGC_ERROR_BUFFER_FULL=1,n.O3DGC_ERROR_CORRUPTED_STREAM=5,n.O3DGC_ERROR_NON_SUPPORTED_FEATURE=6,n.O3DGC_ERROR_AC=7,n.SC3DMCStats=function(){this.m_timeCoord=0;this.m_timeNormal=0;this.m_timeCoordIndex=0;this.m_timeFloatAttribute=new Float32Array(t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES);this.m_timeIntAttribute=new Float32Array(t.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES);this.m_timeReorder=0;this.m_streamSizeCoord=0;this.m_streamSizeNormal=0;this.m_streamSizeCoordIndex=0;this.m_streamSizeFloatAttribute=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES);this.m_streamSizeIntAttribute=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES)},n.SC3DMCTriplet=function(n,t,i){this.m_a=n;this.m_b=t;this.m_c=i},n.SC3DMCTriplet.prototype.Less=function(n){return this.m_c!==n.m_c?this.m_c<n.m_c:this.m_b!==n.m_b?this.m_b<n.m_b:this.m_a<n.m_a},n.SC3DMCTriplet.prototype.Equal=function(n){return this.m_c===n.m_c&&this.m_b===n.m_b&&this.m_a===n.m_a},n.SC3DMCPredictor=function(){this.m_id=new n.SC3DMCTriplet(-1,-1,-1);this.m_pred=new Float32Array(t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES)},u=function(){if(typeof performance!="undefined"&&typeof performance.now!="undefined")return function(){return performance.now()};var n=Date.now();return function(){return Date.now()-n}}(),n.Timer=function(){this.m_start=0;this.m_end=0},n.Timer.prototype.Tic=function(){this.m_start=u()},n.Timer.prototype.Toc=function(){this.m_end=u()},n.Timer.prototype.GetElapsedTime=function(){return this.m_end-this.m_start},n.Vec3=function(n,t,i){this.m_x=n;this.m_y=t;this.m_z=i},n.Vec3.prototype.Set=function(n,t,i){this.m_x=n;this.m_y=t;this.m_z=i},n.Vec3.prototype.Sub=function(n,t){this.m_x=n.m_x-t.m_x;this.m_y=n.m_y-t.m_y;this.m_z=n.m_z-t.m_z},n.Vec3.prototype.Add=function(n,t){this.m_x=n.m_x+t.m_x;this.m_y=n.m_y+t.m_y;this.m_z=n.m_z+t.m_z},n.Vec3.prototype.SelfAdd=function(n){this.m_x+=n.m_x;this.m_y+=n.m_y;this.m_z+=n.m_z},n.Vec3.prototype.Cross=function(n,t){this.m_x=n.m_y*t.m_z-n.m_z*t.m_y;this.m_y=n.m_z*t.m_x-n.m_x*t.m_z;this.m_z=n.m_x*t.m_y-n.m_y*t.m_x},n.Vec3.prototype.GetNorm=function(){return Math.sqrt(this.m_x*this.m_x+this.m_y*this.m_y+this.m_z*this.m_z)},t.CubeToSphere={0:function(n,t){t.m_x=n.m_x;t.m_y=n.m_y;t.m_z=Math.sqrt(Math.max(0,1-t.m_x*t.m_x-t.m_y*t.m_y))},1:function(n,t){t.m_x=-n.m_x;t.m_y=-n.m_y;t.m_z=-Math.sqrt(Math.max(0,1-t.m_x*t.m_x-t.m_y*t.m_y))},2:function(n,t){t.m_z=n.m_x;t.m_x=n.m_y;t.m_y=Math.sqrt(Math.max(0,1-t.m_x*t.m_x-t.m_z*t.m_z))},3:function(n,t){t.m_z=-n.m_x;t.m_x=-n.m_y;t.m_y=-Math.sqrt(Math.max(0,1-t.m_x*t.m_x-t.m_z*t.m_z))},4:function(n,t){t.m_y=n.m_x;t.m_z=n.m_y;t.m_x=Math.sqrt(Math.max(0,1-t.m_y*t.m_y-t.m_z*t.m_z))},5:function(n,t){t.m_y=-n.m_x;t.m_z=-n.m_y;t.m_x=-Math.sqrt(Math.max(0,1-t.m_y*t.m_y-t.m_z*t.m_z))}},n.Iterator=function(){this.m_count=0},n.NumberRef=function(){this.m_value=0},n.BinaryStream=function(n){this.m_endianness=o();this.m_buffer=n;this.m_stream=new Uint8Array(this.m_buffer);this.m_localBuffer=new ArrayBuffer(4);this.m_localBufferViewUChar8=new Uint8Array(this.m_localBuffer);this.m_localBufferViewFloat32=new Float32Array(this.m_localBuffer);this.m_localBufferViewUInt32=new Uint32Array(this.m_localBuffer)},n.BinaryStream.prototype.ReadFloat32Bin=function(n){return this.m_endianness===t.O3DGC_BIG_ENDIAN?(this.m_localBufferViewUChar8[3]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[2]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[1]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[0]=this.m_stream[n.m_count++]):(this.m_localBufferViewUChar8[0]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[1]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[2]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[3]=this.m_stream[n.m_count++]),this.m_localBufferViewFloat32[0]},n.BinaryStream.prototype.ReadUInt32Bin=function(n){return this.m_endianness===t.O3DGC_BIG_ENDIAN?(this.m_localBufferViewUChar8[3]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[2]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[1]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[0]=this.m_stream[n.m_count++]):(this.m_localBufferViewUChar8[0]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[1]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[2]=this.m_stream[n.m_count++],this.m_localBufferViewUChar8[3]=this.m_stream[n.m_count++]),this.m_localBufferViewUInt32[0]},n.BinaryStream.prototype.ReadUChar8Bin=function(n){return this.m_stream[n.m_count++]},n.BinaryStream.prototype.ReadUInt32ASCII=function(n){var i,r,u;for(i=0,r=0,u=0;u<t.O3DGC_BINARY_STREAM_NUM_SYMBOLS_UINT32;++u)i+=this.m_stream[n.m_count++]<<r>>>0,r+=t.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL0;return i},n.BinaryStream.prototype.ReadFloat32ASCII=function(n){var i=this.ReadUInt32ASCII(n);return this.m_endianness===t.O3DGC_BIG_ENDIAN?(this.m_localBufferViewUChar8[3]=i&t.O3DGC_MAX_UCHAR8,i>>>=8,this.m_localBufferViewUChar8[2]=i&t.O3DGC_MAX_UCHAR8,i>>>=8,this.m_localBufferViewUChar8[1]=i&t.O3DGC_MAX_UCHAR8,i>>>=8,this.m_localBufferViewUChar8[0]=i&t.O3DGC_MAX_UCHAR8):(this.m_localBufferViewUChar8[0]=i&t.O3DGC_MAX_UCHAR8,i>>>=8,this.m_localBufferViewUChar8[1]=i&t.O3DGC_MAX_UCHAR8,i>>>=8,this.m_localBufferViewUChar8[2]=i&t.O3DGC_MAX_UCHAR8,i>>>=8,this.m_localBufferViewUChar8[3]=i&t.O3DGC_MAX_UCHAR8),this.m_localBufferViewFloat32[0]},n.BinaryStream.prototype.ReadIntASCII=function(n){return i(this.ReadUIntASCII(n))},n.BinaryStream.prototype.ReadUIntASCII=function(n){var r,u,i;if(i=this.m_stream[n.m_count++],i===t.O3DGC_BINARY_STREAM_MAX_SYMBOL0){r=0;do u=this.m_stream[n.m_count++],i+=u>>>1<<r>>>0,r+=t.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL1;while(u&1)}return i},n.BinaryStream.prototype.ReadUCharASCII=function(n){return this.m_stream[n.m_count++]},n.BinaryStream.prototype.ReadFloat32=function(n,i){return i===t.O3DGC_STREAM_TYPE_ASCII?this.ReadFloat32ASCII(n):this.ReadFloat32Bin(n)},n.BinaryStream.prototype.ReadUInt32=function(n,i){return i===t.O3DGC_STREAM_TYPE_ASCII?this.ReadUInt32ASCII(n):this.ReadUInt32Bin(n)},n.BinaryStream.prototype.ReadUChar=function(n,i){return i===t.O3DGC_STREAM_TYPE_ASCII?this.ReadUCharASCII(n):this.ReadUChar8Bin(n)},n.BinaryStream.prototype.GetBuffer=function(n,t){return new Uint8Array(this.m_buffer,n.m_count,t)},t.O3DGC_AC_MIN_LENGTH=16777216,t.O3DGC_AC_MAX_LENGTH=4294967295,t.O3DGC_AC_BM_LENGTH_SHIFT=13,t.O3DGC_AC_BM_MAX_COUNT=1<<t.O3DGC_AC_BM_LENGTH_SHIFT>>>0,t.O3DGC_AC_DM_LENGTH_SHIFT=15,t.O3DGC_AC_DM_MAX_COUNT=1<<t.O3DGC_AC_DM_LENGTH_SHIFT>>>0,n.StaticBitModel=function(){this.m_bit0Prob=1<<t.O3DGC_AC_BM_LENGTH_SHIFT-1>>>0},n.StaticBitModel.prototype.SetProbability=function(n){this.m_bit0Prob=Math.floor(n*(1<<t.O3DGC_AC_BM_LENGTH_SHIFT>>>0))},n.AdaptiveBitModel=function(){this.m_updateCycle=4;this.m_bitsUntilUpdate=4;this.m_bit0Prob=1<<t.O3DGC_AC_BM_LENGTH_SHIFT-1>>>0;this.m_bit0Count=1;this.m_bitCount=2},n.AdaptiveBitModel.prototype.Reset=function(){this.m_updateCycle=4;this.m_bitsUntilUpdate=4;this.m_bit0Prob=1<<t.O3DGC_AC_BM_LENGTH_SHIFT-1>>>0;this.m_bit0Count=1;this.m_bitCount=2},n.AdaptiveBitModel.prototype.Update=function(){(this.m_bitCount+=this.m_updateCycle)>t.O3DGC_AC_BM_MAX_COUNT&&(this.m_bitCount=this.m_bitCount+1>>>1,this.m_bit0Count=this.m_bit0Count+1>>>1,this.m_bit0Count===this.m_bitCount&&++this.m_bitCount);var n=Math.floor(2147483648/this.m_bitCount);this.m_bit0Prob=this.m_bit0Count*n>>>31-t.O3DGC_AC_BM_LENGTH_SHIFT;this.m_updateCycle=5*this.m_updateCycle>>>2;this.m_updateCycle>64&&(this.m_updateCycle=64);this.m_bitsUntilUpdate=this.m_updateCycle},n.AdaptiveDataModel=function(){this.m_buffer={};this.m_distribution={};this.m_symbolCount={};this.m_decoderTable={};this.m_totalCount=0;this.m_updateCycle=0;this.m_symbolsUntilUpdate=0;this.m_dataSymbols=0;this.m_lastSymbol=0;this.m_tableSize=0;this.m_tableShift=0},n.AdaptiveDataModel.prototype.Update=function(){var i,r,u,f,n,e,o;if((this.m_totalCount+=this.m_updateCycle)>t.O3DGC_AC_DM_MAX_COUNT)for(this.m_totalCount=0,i=0;i<this.m_dataSymbols;++i)this.m_totalCount+=this.m_symbolCount[i]=this.m_symbolCount[i]+1>>>1;if(r=0,u=0,f=Math.floor(2147483648/this.m_totalCount),this.m_tableSize===0)for(n=0;n<this.m_dataSymbols;++n)this.m_distribution[n]=f*r>>>31-t.O3DGC_AC_DM_LENGTH_SHIFT,r+=this.m_symbolCount[n];else{for(n=0;n<this.m_dataSymbols;++n)for(this.m_distribution[n]=f*r>>>31-t.O3DGC_AC_DM_LENGTH_SHIFT,r+=this.m_symbolCount[n],o=this.m_distribution[n]>>>this.m_tableShift;u<o;)this.m_decoderTable[++u]=n-1;for(this.m_decoderTable[0]=0;u<=this.m_tableSize;)this.m_decoderTable[++u]=this.m_dataSymbols-1}this.m_updateCycle=5*this.m_updateCycle>>>2;e=this.m_dataSymbols+6<<3>>>0;this.m_updateCycle>e&&(this.m_updateCycle=e);this.m_symbolsUntilUpdate=this.m_updateCycle},n.AdaptiveDataModel.prototype.Reset=function(){var n;if(this.m_dataSymbols!==0){for(this.m_totalCount=0,this.m_updateCycle=this.m_dataSymbols,n=0;n<this.m_dataSymbols;++n)this.m_symbolCount[n]=1;this.Update();this.m_symbolsUntilUpdate=this.m_updateCycle=this.m_dataSymbols+6>>>1}},n.AdaptiveDataModel.prototype.SetAlphabet=function(i){if(i<2||i>2048)return Console.log("invalid number of data symbols"),n.O3DGC_ERROR_AC;if(this.m_dataSymbols!==i)if(this.m_dataSymbols=i,this.m_lastSymbol=this.m_dataSymbols-1,this.m_dataSymbols>16){for(var r=3;this.m_dataSymbols>1<<r+2>>>0;)++r;this.m_tableSize=1<<r>>>0;this.m_tableShift=t.O3DGC_AC_DM_LENGTH_SHIFT-r;this.m_buffer=new ArrayBuffer(4*(2*this.m_dataSymbols+this.m_tableSize+2));this.m_distribution=new Uint32Array(this.m_buffer,0,this.m_dataSymbols);this.m_symbolCount=new Uint32Array(this.m_buffer,4*this.m_dataSymbols,this.m_dataSymbols);this.m_decoderTable=new Uint32Array(this.m_buffer,8*this.m_dataSymbols,this.m_tableSize+2)}else this.m_tableSize=this.m_tableShift=0,this.m_buffer=new ArrayBuffer(8*this.m_dataSymbols),this.m_distribution=new Uint32Array(this.m_buffer,0,this.m_dataSymbols),this.m_symbolCount=new Uint32Array(this.m_buffer,4*this.m_dataSymbols,this.m_dataSymbols),this.m_decoderTable={};return this.Reset(),n.O3DGC_OK},n.ArithmeticDecoder=function(){this.m_codeBuffer={};this.m_acShift=0;this.m_base=0;this.m_value=0;this.m_length=0;this.m_bufferSize=0;this.m_mode=0},n.ArithmeticDecoder.prototype.SetBuffer=function(t,i){if(t===0)return Console.log("invalid codec buffer size"),n.O3DGC_ERROR_AC;if(this.m_mode!==0)return Console.log("cannot set buffer while encoding or decoding"),n.O3DGC_ERROR_AC;this.m_bufferSize=t;this.m_codeBuffer=i},n.ArithmeticDecoder.prototype.StartDecoder=function(){if(this.m_mode!==0)return Console.log("cannot start decoder"),n.O3DGC_ERROR_AC;if(this.m_bufferSize===0)return Console.log("no code buffer set"),n.O3DGC_ERROR_AC;this.m_mode=2;this.m_length=t.O3DGC_AC_MAX_LENGTH;this.m_acShift=3;this.m_value=(this.m_codeBuffer[0]<<24|this.m_codeBuffer[1]<<16|this.m_codeBuffer[2]<<8|this.m_codeBuffer[3])>>>0},n.ArithmeticDecoder.prototype.StopDecoder=function(){if(this.m_mode!==2)return Console.log("invalid to stop decoder"),n.O3DGC_ERROR_AC;this.m_mode=0},n.ArithmeticDecoder.prototype.GetBit=function(){this.m_length>>>=1;var n=this.m_value>=this.m_length;return n&&(this.m_value-=this.m_length),this.m_length<t.O3DGC_AC_MIN_LENGTH&&this.RenormDecInterval(),n},n.ArithmeticDecoder.prototype.GetBits=function(n){var i=Math.floor(this.m_value/(this.m_length>>>=n));return this.m_value-=this.m_length*i,this.m_length<t.O3DGC_AC_MIN_LENGTH&&this.RenormDecInterval(),i},n.ArithmeticDecoder.prototype.DecodeStaticBitModel=function(n){var i,r;return i=n.m_bit0Prob*(this.m_length>>>t.O3DGC_AC_BM_LENGTH_SHIFT),r=this.m_value>=i,r?(this.m_value-=i,this.m_length-=i):this.m_length=i,this.m_length<t.O3DGC_AC_MIN_LENGTH&&this.RenormDecInterval(),r},n.ArithmeticDecoder.prototype.DecodeAdaptiveBitModel=function(n){var i,r;return i=n.m_bit0Prob*(this.m_length>>>t.O3DGC_AC_BM_LENGTH_SHIFT),r=this.m_value>=i,r?(this.m_value-=i,this.m_length-=i):(this.m_length=i,++n.m_bit0Count),this.m_length<t.O3DGC_AC_MIN_LENGTH&&this.RenormDecInterval(),--n.m_bitsUntilUpdate==0&&n.Update(),r},n.ArithmeticDecoder.prototype.DecodeAdaptiveDataModel=function(n){var u,i,f,e,s,h,o,r;if(e=this.m_length,n.m_tableSize>0){for(h=Math.floor(this.m_value/(this.m_length>>>=t.O3DGC_AC_DM_LENGTH_SHIFT)),s=h>>>n.m_tableShift,i=n.m_decoderTable[s],u=n.m_decoderTable[s+1]+1;u>i+1;)r=i+u>>>1,n.m_distribution[r]>h?u=r:i=r;f=n.m_distribution[i]*this.m_length;i!==n.m_lastSymbol&&(e=n.m_distribution[i+1]*this.m_length)}else{f=i=0;this.m_length>>>=t.O3DGC_AC_DM_LENGTH_SHIFT;r=(u=n.m_dataSymbols)>>>1;do o=this.m_length*n.m_distribution[r],o>this.m_value?(u=r,e=o):(i=r,f=o);while((r=i+u>>>1)!==i)}return this.m_value-=f,this.m_length=e-f,this.m_length<t.O3DGC_AC_MIN_LENGTH&&this.RenormDecInterval(),++n.m_symbolCount[i],--n.m_symbolsUntilUpdate==0&&n.Update(!1),i},n.ArithmeticDecoder.prototype.ExpGolombDecode=function(n,t,i){var u,r,f;u=0;r=0;do f=this.DecodeAdaptiveBitModel(i),f&&(u+=1<<n>>>0,n++);while(f);while(n--)this.DecodeStaticBitModel(t)&&(r=(r|1<<n)>>>0);return u+r},n.ArithmeticDecoder.prototype.RenormDecInterval=function(){do this.m_value=(this.m_value<<8|this.m_codeBuffer[++this.m_acShift])>>>0,this.m_length=this.m_length<<8>>>0;while(this.m_length<t.O3DGC_AC_MIN_LENGTH)},n.ArithmeticDecoder.prototype.DecodeIntACEGC=function(n,t,r,u,f){var e=this.DecodeAdaptiveDataModel(n);return e===f&&(e+=this.ExpGolombDecode(u,t,r)),i(e)},n.ArithmeticDecoder.prototype.DecodeUIntACEGC=function(n,t,i,r,u){var f=this.DecodeAdaptiveDataModel(n);return f===u&&(f+=this.ExpGolombDecode(r,t,i)),f},n.FIFO=function(){this.m_data={};this.m_allocated=0;this.m_size=0;this.m_start=0;this.m_end=0},n.FIFO.prototype.Clear=function(){this.m_start=this.m_end=this.m_size=0},n.FIFO.prototype.GetAllocatedSize=function(){return this.m_allocated},n.FIFO.prototype.GetSize=function(){return this.m_size},n.FIFO.prototype.Allocate=function(t){return t>this.m_allocated&&(this.m_allocated=t,this.m_data=new Int32Array(this.m_allocated)),this.Clear(),n.O3DGC_OK},n.FIFO.prototype.PopFirst=function(){--this.m_size;var n=this.m_start++;return this.m_start===this.m_allocated&&(this.m_end=0),this.m_data[n]},n.FIFO.prototype.PushBack=function(n){--this.m_size;this.m_data[this.m_end]=n;++this.m_size;++this.m_end;this.m_end===this.m_allocated&&(this.m_end=0)},n.IndexedFaceSet=function(){this.m_nCoordIndex=0;this.m_nCoord=0;this.m_nNormal=0;this.m_numFloatAttributes=0;this.m_numIntAttributes=0;this.m_creaseAngle=30;this.m_ccw=!0;this.m_solid=!0;this.m_convex=!0;this.m_isTriangularMesh=!0;this.m_coordMin=new Float32Array(3);this.m_coordMax=new Float32Array(3);this.m_normalMin=new Float32Array(3);this.m_normalMax=new Float32Array(3);this.m_nFloatAttribute=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES);this.m_nIntAttribute=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES);this.m_dimFloatAttribute=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES);this.m_dimIntAttribute=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES);this.m_typeFloatAttribute=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES);this.m_typeIntAttribute=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES);this.m_minFloatAttributeBuffer=new ArrayBuffer(4*t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES*t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES);this.m_minFloatAttribute=new Float32Array(this.m_minFloatAttributeBuffer);this.m_maxFloatAttributeBuffer=new ArrayBuffer(4*t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES*t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES);this.m_maxFloatAttribute=new Float32Array(this.m_maxFloatAttributeBuffer);this.m_coordIndex={};this.m_coord={};this.m_normal={};this.m_floatAttribute=[];this.m_intAttribute=[]},n.IndexedFaceSet.prototype.GetNCoordIndex=function(){return this.m_nCoordIndex},n.IndexedFaceSet.prototype.GetNCoordIndex=function(){return this.m_nCoordIndex},n.IndexedFaceSet.prototype.GetNCoord=function(){return this.m_nCoord},n.IndexedFaceSet.prototype.GetNNormal=function(){return this.m_nNormal},n.IndexedFaceSet.prototype.GetNFloatAttribute=function(n){return this.m_nFloatAttribute[n]},n.IndexedFaceSet.prototype.GetNIntAttribute=function(n){return this.m_nIntAttribute[n]},n.IndexedFaceSet.prototype.GetNumFloatAttributes=function(){return this.m_numFloatAttributes},n.IndexedFaceSet.prototype.GetNumIntAttributes=function(){return this.m_numIntAttributes},n.IndexedFaceSet.prototype.GetCoordMinArray=function(){return this.m_coordMin},n.IndexedFaceSet.prototype.GetCoordMaxArray=function(){return this.m_coordMax},n.IndexedFaceSet.prototype.GetNormalMinArray=function(){return this.m_normalMin},n.IndexedFaceSet.prototype.GetNormalMaxArray=function(){return this.m_normalMax},n.IndexedFaceSet.prototype.GetFloatAttributeMinArray=function(n){return new Float32Array(this.m_minFloatAttributeBuffer,n*t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES*4,this.GetFloatAttributeDim(n))},n.IndexedFaceSet.prototype.GetFloatAttributeMaxArray=function(n){return new Float32Array(this.m_maxFloatAttributeBuffer,n*t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES*4,this.GetFloatAttributeDim(n))},n.IndexedFaceSet.prototype.GetFloatAttributeDim=function(n){return this.m_dimFloatAttribute[n]},n.IndexedFaceSet.prototype.GetIntAttributeDim=function(n){return this.m_dimIntAttribute[n]},n.IndexedFaceSet.prototype.GetFloatAttributeType=function(n){return this.m_typeFloatAttribute[n]},n.IndexedFaceSet.prototype.GetIntAttributeType=function(n){return this.m_typeIntAttribute[n]},n.IndexedFaceSet.prototype.GetFloatAttributeMax=function(n,i){return this.m_maxFloatAttribute[n*t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES+i]},n.IndexedFaceSet.prototype.GetCreaseAngle=function(){return this.m_creaseAngle},n.IndexedFaceSet.prototype.GetCreaseAngle=function(){return this.m_creaseAngle},n.IndexedFaceSet.prototype.GetCCW=function(){return this.m_ccw},n.IndexedFaceSet.prototype.GetSolid=function(){return this.m_solid},n.IndexedFaceSet.prototype.GetConvex=function(){return this.m_convex},n.IndexedFaceSet.prototype.GetIsTriangularMesh=function(){return this.m_isTriangularMesh},n.IndexedFaceSet.prototype.GetCoordIndex=function(){return this.m_coordIndex},n.IndexedFaceSet.prototype.GetCoordIndex=function(){return this.m_coordIndex},n.IndexedFaceSet.prototype.GetCoord=function(){return this.m_coord},n.IndexedFaceSet.prototype.GetNormal=function(){return this.m_normal},n.IndexedFaceSet.prototype.GetFloatAttribute=function(n){return this.m_floatAttribute[n]},n.IndexedFaceSet.prototype.GetIntAttribute=function(n){return this.m_intAttribute[n]},n.IndexedFaceSet.prototype.SetNCoordIndex=function(n){this.m_nCoordIndex=n},n.IndexedFaceSet.prototype.SetNNormalIndex=function(){},n.IndexedFaceSet.prototype.SetNormalPerVertex=function(){},n.IndexedFaceSet.prototype.SetNFloatAttributeIndex=function(){},n.IndexedFaceSet.prototype.SetNIntAttributeIndex=function(){},n.IndexedFaceSet.prototype.SetFloatAttributePerVertex=function(){},n.IndexedFaceSet.prototype.SetIntAttributePerVertex=function(){},n.IndexedFaceSet.prototype.SetNCoord=function(n){this.m_nCoord=n},n.IndexedFaceSet.prototype.SetNNormal=function(n){this.m_nNormal=n},n.IndexedFaceSet.prototype.SetNumFloatAttributes=function(n){this.m_numFloatAttributes=n},n.IndexedFaceSet.prototype.SetNumIntAttributes=function(n){this.m_numIntAttributes=n},n.IndexedFaceSet.prototype.SetCreaseAngle=function(n){this.m_creaseAngle=n},n.IndexedFaceSet.prototype.SetCCW=function(n){this.m_ccw=n},n.IndexedFaceSet.prototype.SetSolid=function(n){this.m_solid=n},n.IndexedFaceSet.prototype.SetConvex=function(n){this.m_convex=n},n.IndexedFaceSet.prototype.SetIsTriangularMesh=function(n){this.m_isTriangularMesh=n},n.IndexedFaceSet.prototype.SetCoordMin=function(n,t){this.m_coordMin[n]=t},n.IndexedFaceSet.prototype.SetCoordMax=function(n,t){this.m_coordMax[n]=t},n.IndexedFaceSet.prototype.SetNormalMin=function(n,t){this.m_normalMin[n]=t},n.IndexedFaceSet.prototype.SetNormalMax=function(n,t){this.m_normalMax[n]=t},n.IndexedFaceSet.prototype.SetNFloatAttribute=function(n,t){this.m_nFloatAttribute[n]=t},n.IndexedFaceSet.prototype.SetNIntAttribute=function(n,t){this.m_nIntAttribute[n]=t},n.IndexedFaceSet.prototype.SetFloatAttributeDim=function(n,t){this.m_dimFloatAttribute[n]=t},n.IndexedFaceSet.prototype.SetIntAttributeDim=function(n,t){this.m_dimIntAttribute[n]=t},n.IndexedFaceSet.prototype.SetFloatAttributeType=function(n,t){this.m_typeFloatAttribute[n]=t},n.IndexedFaceSet.prototype.SetIntAttributeType=function(n,t){this.m_typeIntAttribute[n]=t},n.IndexedFaceSet.prototype.SetFloatAttributeMin=function(n,i,r){this.m_minFloatAttribute[n*t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES+i]=r},n.IndexedFaceSet.prototype.SetFloatAttributeMax=function(n,i,r){this.m_maxFloatAttribute[n*t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES+i]=r},n.IndexedFaceSet.prototype.SetCoordIndex=function(n){this.m_coordIndex=n},n.IndexedFaceSet.prototype.SetCoord=function(n){this.m_coord=n},n.IndexedFaceSet.prototype.SetNormal=function(n){this.m_normal=n},n.IndexedFaceSet.prototype.SetFloatAttribute=function(n,t){this.m_floatAttribute[n]=t},n.IndexedFaceSet.prototype.SetIntAttribute=function(n,t){this.m_intAttribute[n]=t},n.SC3DMCEncodeParams=function(){var n;for(this.m_numFloatAttributes=0,this.m_numIntAttributes=0,this.m_floatAttributeQuantBits=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES),this.m_floatAttributePredMode=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES),this.m_intAttributePredMode=new Uint32Array(t.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES),this.m_encodeMode=t.O3DGC_SC3DMC_ENCODE_MODE_TFAN,this.m_streamTypeMode=t.O3DGC_STREAM_TYPE_ASCII,this.m_coordQuantBits=14,this.m_normalQuantBits=8,this.m_coordPredMode=t.O3DGC_SC3DMC_PARALLELOGRAM_PREDICTION,this.m_normalPredMode=t.O3DGC_SC3DMC_SURF_NORMALS_PREDICTION,n=0;n<t.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES;++n)this.m_floatAttributePredMode[n]=t.O3DGC_SC3DMC_PARALLELOGRAM_PREDICTION;for(n=0;n<t.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES;++n)this.m_intAttributePredMode[n]=t.O3DGC_SC3DMC_DIFFERENTIAL_PREDICTION},n.SC3DMCEncodeParams.prototype.GetStreamType=function(){return this.m_streamTypeMode},n.SC3DMCEncodeParams.prototype.GetEncodeMode=function(){return this.m_encodeMode},n.SC3DMCEncodeParams.prototype.GetNumFloatAttributes=function(){return this.m_numFloatAttributes},n.SC3DMCEncodeParams.prototype.GetNumIntAttributes=function(){return this.m_numIntAttributes},n.SC3DMCEncodeParams.prototype.GetCoordQuantBits=function(){return this.m_coordQuantBits},n.SC3DMCEncodeParams.prototype.GetNormalQuantBits=function(){return this.m_normalQuantBits},n.SC3DMCEncodeParams.prototype.GetFloatAttributeQuantBits=function(n){return this.m_floatAttributeQuantBits[n]},n.SC3DMCEncodeParams.prototype.GetCoordPredMode=function(){return this.m_coordPredMode},n.SC3DMCEncodeParams.prototype.GetNormalPredMode=function(){return this.m_normalPredMode},n.SC3DMCEncodeParams.prototype.GetFloatAttributePredMode=function(n){return this.m_floatAttributePredMode[n]},n.SC3DMCEncodeParams.prototype.GetIntAttributePredMode=function(n){return this.m_intAttributePredMode[n]},n.SC3DMCEncodeParams.prototype.GetCoordPredMode=function(){return this.m_coordPredMode},n.SC3DMCEncodeParams.prototype.GetNormalPredMode=function(){return this.m_normalPredMode},n.SC3DMCEncodeParams.prototype.GetFloatAttributePredMode=function(n){return this.m_floatAttributePredMode[n]},n.SC3DMCEncodeParams.prototype.GetIntAttributePredMode=function(n){return this.m_intAttributePredMode[n]},n.SC3DMCEncodeParams.prototype.SetStreamType=function(n){this.m_streamTypeMode=n},n.SC3DMCEncodeParams.prototype.SetEncodeMode=function(n){this.m_encodeMode=n},n.SC3DMCEncodeParams.prototype.SetNumFloatAttributes=function(n){this.m_numFloatAttributes=n},n.SC3DMCEncodeParams.prototype.SetNumIntAttributes=function(n){this.m_numIntAttributes=n},n.SC3DMCEncodeParams.prototype.SetCoordQuantBits=function(n){this.m_coordQuantBits=n},n.SC3DMCEncodeParams.prototype.SetNormalQuantBits=function(n){this.m_normalQuantBits=n},n.SC3DMCEncodeParams.prototype.SetFloatAttributeQuantBits=function(n,t){this.m_floatAttributeQuantBits[n]=t},n.SC3DMCEncodeParams.prototype.SetCoordPredMode=function(n){this.m_coordPredMode=n},n.SC3DMCEncodeParams.prototype.SetNormalPredMode=function(n){this.m_normalPredMode=n},n.SC3DMCEncodeParams.prototype.SetFloatAttributePredMode=function(n,t){this.m_floatAttributePredMode[n]=t},n.SC3DMCEncodeParams.prototype.SetIntAttributePredMode=function(n,t){this.m_intAttributePredMode[n]=t},n.AdjacencyInfo=function(){this.m_neighborsSize=0;this.m_numNeighborsSize=0;this.m_numElements=0;this.m_neighbors={};this.m_numNeighbors={}},n.AdjacencyInfo.prototype.Allocate=function(t,i){return this.m_numElements=t,i>this.m_neighborsSize&&(this.m_neighborsSize=i,this.m_neighbors=new Int32Array(this.m_neighborsSize)),t>this.m_numNeighborsSize&&(this.m_numNeighborsSize=t,this.m_numNeighbors=new Int32Array(this.m_numNeighborsSize)),n.O3DGC_OK},n.AdjacencyInfo.prototype.AllocateNumNeighborsArray=function(t){return t>this.m_numNeighborsSize&&(this.m_numNeighborsSize=t,this.m_numNeighbors=new Int32Array(this.m_numNeighborsSize)),this.m_numElements=t,n.O3DGC_OK},n.AdjacencyInfo.prototype.AllocateNeighborsArray=function(){for(var t=1;t<this.m_numElements;++t)this.m_numNeighbors[t]+=this.m_numNeighbors[t-1];return this.m_numNeighbors[this.m_numElements-1]>this.m_neighborsSize&&(this.m_neighborsSize=this.m_numNeighbors[this.m_numElements-1],this.m_neighbors=new Int32Array(this.m_neighborsSize)),n.O3DGC_OK},n.AdjacencyInfo.prototype.ClearNumNeighborsArray=function(){for(var t=0;t<this.m_numElements;++t)this.m_numNeighbors[t]=0;return n.O3DGC_OK},n.AdjacencyInfo.prototype.ClearNeighborsArray=function(){for(var t=0;t<this.m_neighborsSize;++t)this.m_neighbors[t]=-1;return n.O3DGC_OK},n.AdjacencyInfo.prototype.Begin=function(n){return n>0?this.m_numNeighbors[n-1]:0},n.AdjacencyInfo.prototype.End=function(n){return this.m_numNeighbors[n]},n.AdjacencyInfo.prototype.AddNeighbor=function(t,i){var r,u,f;for(u=this.Begin(t),f=this.End(t),r=u;r<f;++r)if(this.m_neighbors[r]===-1)return this.m_neighbors[r]=i,n.O3DGC_OK;return n.O3DGC_ERROR_BUFFER_FULL},n.AdjacencyInfo.prototype.GetNeighbor=function(n){return this.m_neighbors[n]},n.AdjacencyInfo.prototype.GetNumNeighbors=function(n){return this.End(n)-this.Begin(n)},n.AdjacencyInfo.prototype.GetNumNeighborsBuffer=function(){return this.m_numNeighbors},n.AdjacencyInfo.prototype.GetNeighborsBuffer=function(){return this.m_neighbors},n.Vector=function(){this.m_data={};this.m_allocated=0;this.m_size=0},n.Vector.prototype.Clear=function(){this.m_size=0},n.Vector.prototype.Get=function(n){return this.m_data[n]},n.Vector.prototype.GetAllocatedSize=function(){return this.m_allocated},n.Vector.prototype.GetSize=function(){return this.m_size},n.Vector.prototype.GetBuffer=function(){return this.m_data},n.Vector.prototype.SetSize=function(n){this.m_size=n},n.Vector.prototype.Allocate=function(n){var t,i;if(n>this.m_allocated){if(this.m_allocated=n,i=new Int32Array(this.m_allocated),this.m_size>0)for(t=0;t<this.m_size;++t)i[t]=this.m_data[t];this.m_data=i}},n.Vector.prototype.PushBack=function(n){var i,r;if(this.m_size===this.m_allocated){if(this.m_allocated*=2,this.m_allocated<t.O3DGC_DEFAULT_VECTOR_SIZE&&(this.m_allocated=t.O3DGC_DEFAULT_VECTOR_SIZE),r=new Int32Array(this.m_allocated),this.m_size>0)for(i=0;i<this.m_size;++i)r[i]=this.m_data[i];this.m_data=r}this.m_data[this.m_size++]=n},n.CompressedTriangleFans=function(){this.m_numTFANs=new n.Vector;this.m_degrees=new n.Vector;this.m_configs=new n.Vector;this.m_operations=new n.Vector;this.m_indices=new n.Vector;this.m_trianglesOrder=new n.Vector;this.m_streamType=t.O3DGC_STREAM_TYPE_UNKOWN},n.CompressedTriangleFans.prototype.GetStreamType=function(){return this.m_streamType},n.CompressedTriangleFans.prototype.SetStreamType=function(n){this.m_streamType=n},n.CompressedTriangleFans.prototype.Clear=function(){return this.m_numTFANs.Clear(),this.m_degrees.Clear(),this.m_configs.Clear(),this.m_operations.Clear(),this.m_indices.Clear(),n.O3DGC_OK},n.CompressedTriangleFans.prototype.Allocate=function(t,i){return this.m_numTFANs.Allocate(t),this.m_degrees.Allocate(2*t),this.m_configs.Allocate(2*t),this.m_operations.Allocate(2*t),this.m_indices.Allocate(2*t),this.m_trianglesOrder.Allocate(i),this.Clear(),n.O3DGC_OK},n.CompressedTriangleFans.prototype.PushNumTFans=function(n){this.m_numTFANs.PushBack(n)},n.CompressedTriangleFans.prototype.ReadNumTFans=function(n){return this.m_numTFANs.Get(n.m_count++)},n.CompressedTriangleFans.prototype.PushDegree=function(n){this.m_degrees.PushBack(n)},n.CompressedTriangleFans.prototype.ReadDegree=function(n){return this.m_degrees.Get(n.m_count++)},n.CompressedTriangleFans.prototype.PushConfig=function(n){this.m_configs.PushBack(n)},n.CompressedTriangleFans.prototype.ReadConfig=function(n){return this.m_configs.Get(n.m_count++)},n.CompressedTriangleFans.prototype.PushOperation=function(n){this.m_operations.PushBack(n)},n.CompressedTriangleFans.prototype.ReadOperation=function(n){return this.m_operations.Get(n.m_count++)},n.CompressedTriangleFans.prototype.PushIndex=function(n){this.m_indices.PushBack(n)},n.CompressedTriangleFans.prototype.ReadIndex=function(n){return this.m_indices.Get(n.m_count++)},n.CompressedTriangleFans.prototype.PushTriangleIndex=function(n){this.m_trianglesOrder.PushBack(h(n))},n.CompressedTriangleFans.prototype.ReadTriangleIndex=function(n){return i(this.m_trianglesOrder.Get(n.m_count++))},n.CompressedTriangleFans.prototype.LoadUIntData=function(t,i,r){var u,f;for(i.ReadUInt32ASCII(r),u=i.ReadUInt32ASCII(r),t.Allocate(u),t.Clear(),f=0;f<u;++f)t.PushBack(i.ReadUIntASCII(r));return n.O3DGC_OK},n.CompressedTriangleFans.prototype.LoadIntData=function(t,i,r){var u,f;for(i.ReadUInt32ASCII(r),u=i.ReadUInt32ASCII(r),t.Allocate(u),t.Clear(),f=0;f<u;++f)t.PushBack(i.ReadIntASCII(r));return n.O3DGC_OK},n.CompressedTriangleFans.prototype.LoadBinData=function(i,r,u){var f,e,o,s;for(r.ReadUInt32ASCII(u),f=r.ReadUInt32ASCII(u),i.Allocate(f*t.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL0),i.Clear(),o=0;o<f;)for(e=r.ReadUCharASCII(u),s=0;s<t.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL0;++s)i.PushBack(e&1),e>>>=1,++o;return n.O3DGC_OK},n.CompressedTriangleFans.prototype.LoadUIntAC=function(t,i,r,u){var f,e,c,l,o,s,h;if(f=r.ReadUInt32Bin(u)-12,e=r.ReadUInt32Bin(u),e===0)return n.O3DGC_OK;for(c=r.ReadUInt32Bin(u),l=r.GetBuffer(u,f),u.m_count+=f,t.Allocate(e),o=new n.ArithmeticDecoder,o.SetBuffer(f,l),o.StartDecoder(),s=new n.AdaptiveDataModel,s.SetAlphabet(i+1),h=0;h<e;++h)t.PushBack(o.DecodeAdaptiveDataModel(s)+c);return n.O3DGC_OK},n.CompressedTriangleFans.prototype.LoadIntACEGC=function(i,r,u,f){var o,s,a,v,e,c,y,p,h,l;if(o=u.ReadUInt32Bin(f)-12,s=u.ReadUInt32Bin(f),s===0)return n.O3DGC_OK;for(a=u.ReadUInt32Bin(f)-t.O3DGC_MAX_LONG,v=u.GetBuffer(f,o),f.m_count+=o,i.Allocate(s),e=new n.ArithmeticDecoder,e.SetBuffer(o,v),e.StartDecoder(),c=new n.AdaptiveDataModel,c.SetAlphabet(r+2),y=new n.StaticBitModel,p=new n.AdaptiveBitModel,l=0;l<s;++l)h=e.DecodeAdaptiveDataModel(c),h===r&&(h+=e.ExpGolombDecode(0,y,p)),i.PushBack(h+a);return n.O3DGC_OK},n.CompressedTriangleFans.prototype.LoadBinAC=function(t,i,r){var u,f,s,e,h,o;if(u=i.ReadUInt32Bin(r)-8,f=i.ReadUInt32Bin(r),f===0)return n.O3DGC_OK;for(s=i.GetBuffer(r,u),r.m_count+=u,t.Allocate(f),e=new n.ArithmeticDecoder,e.SetBuffer(u,s),e.StartDecoder(),h=new n.AdaptiveBitModel,o=0;o<f;++o)t.PushBack(e.DecodeAdaptiveBitModel(h));return n.O3DGC_OK},n.CompressedTriangleFans.prototype.Load=function(i,r,u,f){return f===t.O3DGC_STREAM_TYPE_ASCII?(this.LoadUIntData(this.m_numTFANs,i,r),this.LoadUIntData(this.m_degrees,i,r),this.LoadUIntData(this.m_configs,i,r),this.LoadBinData(this.m_operations,i,r),this.LoadIntData(this.m_indices,i,r),u&&this.LoadUIntData(this.m_trianglesOrder,i,r)):(this.LoadIntACEGC(this.m_numTFANs,4,i,r),this.LoadIntACEGC(this.m_degrees,16,i,r),this.LoadUIntAC(this.m_configs,10,i,r),this.LoadBinAC(this.m_operations,i,r),this.LoadIntACEGC(this.m_indices,8,i,r),u&&this.LoadIntACEGC(this.m_trianglesOrder,16,i,r)),n.O3DGC_OK},n.TriangleFans=function(){this.m_verticesAllocatedSize=0;this.m_sizeTFANAllocatedSize=0;this.m_numTFANs=0;this.m_numVertices=0;this.m_sizeTFAN={};this.m_vertices={}},n.TriangleFans.prototype.Allocate=function(t,i){return this.m_numTFANs=0,this.m_numVertices=0,this.m_verticesAllocatedSize<i&&(this.m_verticesAllocatedSize=i,this.m_vertices=new Int32Array(this.m_verticesAllocatedSize)),this.m_sizeTFANAllocatedSize<t&&(this.m_sizeTFANAllocatedSize=t,this.m_sizeTFAN=new Int32Array(this.m_sizeTFANAllocatedSize)),n.O3DGC_OK},n.TriangleFans.prototype.Clear=function(){return this.m_numTFANs=0,this.m_numVertices=0,n.O3DGC_OK},n.TriangleFans.prototype.AddVertex=function(t){var i,r;if(++this.m_numVertices,this.m_numVertices>this.m_verticesAllocatedSize){for(this.m_verticesAllocatedSize*=2,r=new Int32Array(this.m_verticesAllocatedSize),i=0;i<this.m_numVertices;++i)r[i]=this.m_vertices[i];this.m_vertices=r}return this.m_vertices[this.m_numVertices-1]=t,++this.m_sizeTFAN[this.m_numTFANs-1],n.O3DGC_OK},n.TriangleFans.prototype.AddTFAN=function(){var t,i;if(++this.m_numTFANs,this.m_numTFANs>this.m_sizeTFANAllocatedSize){for(this.m_sizeTFANAllocatedSize*=2,i=new Int32Array(this.m_sizeTFANAllocatedSize),t=0;t<this.m_numTFANs;++t)i[t]=this.m_sizeTFAN[t];this.m_sizeTFAN=i}return this.m_sizeTFAN[this.m_numTFANs-1]=this.m_numTFANs>1?this.m_sizeTFAN[this.m_numTFANs-2]:0,n.O3DGC_OK},n.TriangleFans.prototype.Begin=function(n){return n>0?this.m_sizeTFAN[n-1]:0},n.TriangleFans.prototype.End=function(n){return this.m_sizeTFAN[n]},n.TriangleFans.prototype.GetVertex=function(n){return this.m_vertices[n]},n.TriangleFans.prototype.GetTFANSize=function(n){return this.End(n)-this.Begin(n)},n.TriangleFans.prototype.GetNumTFANs=function(){return this.m_numTFANs},n.TriangleFans.prototype.GetNumVertices=function(){return this.m_numVertices},n.TriangleListDecoder=function(){this.m_itNumTFans=new n.Iterator;this.m_itDegree=new n.Iterator;this.m_itConfig=new n.Iterator;this.m_itOperation=new n.Iterator;this.m_itIndex=new n.Iterator;this.m_maxNumVertices=0;this.m_maxNumTriangles=0;this.m_numTriangles=0;this.m_numVertices=0;this.m_tempTrianglesSize=0;this.m_vertexCount=0;this.m_triangleCount=0;this.m_numConqueredTriangles=0;this.m_numVisitedVertices=0;this.m_triangles={};this.m_tempTriangles={};this.m_visitedVertices={};this.m_visitedVerticesValence={};this.m_vertexToTriangle=new n.AdjacencyInfo;this.m_ctfans=new n.CompressedTriangleFans;this.m_tfans=new n.TriangleFans;this.m_streamType=t.O3DGC_STREAM_TYPE_ASCII;this.m_decodeTrianglesOrder=!1;this.m_decodeVerticesOrder=!1;this.m_processConfig={0:function(n,t){var i;for(n.m_tfans.AddVertex(n.m_visitedVertices[0]),i=1;i<t-1;++i)n.m_visitedVertices[n.m_numVisitedVertices++]=n.m_vertexCount,n.m_tfans.AddVertex(n.m_vertexCount++);n.m_tfans.AddVertex(n.m_visitedVertices[1])},1:function(n,t,i){var u,f,r;for(n.m_tfans.AddVertex(n.m_visitedVertices[0]),u=1;u<t-1;++u)f=n.m_ctfans.ReadOperation(n.m_itOperation),f===1?(r=n.m_ctfans.ReadIndex(n.m_itIndex),r<0?n.m_tfans.AddVertex(n.m_visitedVertices[-r-1]):n.m_tfans.AddVertex(r+i)):(n.m_visitedVertices[n.m_numVisitedVertices++]=n.m_vertexCount,n.m_tfans.AddVertex(n.m_vertexCount++));n.m_tfans.AddVertex(n.m_visitedVertices[1])},2:function(n,t){for(var i=0;i<t-1;++i)n.m_visitedVertices[n.m_numVisitedVertices++]=n.m_vertexCount,n.m_tfans.AddVertex(n.m_vertexCount++);n.m_tfans.AddVertex(n.m_visitedVertices[0])},3:function(n,t){for(var i=0;i<t-1;++i)n.m_visitedVertices[n.m_numVisitedVertices++]=n.m_vertexCount,n.m_tfans.AddVertex(n.m_vertexCount++);n.m_tfans.AddVertex(n.m_visitedVertices[1])},4:function(n,t){var i;for(n.m_tfans.AddVertex(n.m_visitedVertices[0]),i=1;i<t;++i)n.m_visitedVertices[n.m_numVisitedVertices++]=n.m_vertexCount,n.m_tfans.AddVertex(n.m_vertexCount++)},5:function(n,t){var i;for(n.m_tfans.AddVertex(n.m_visitedVertices[1]),i=1;i<t;++i)n.m_visitedVertices[n.m_numVisitedVertices++]=n.m_vertexCount,n.m_tfans.AddVertex(n.m_vertexCount++)},6:function(n,t){for(var i=0;i<t;++i)n.m_visitedVertices[n.m_numVisitedVertices++]=n.m_vertexCount,n.m_tfans.AddVertex(n.m_vertexCount++)},7:function(n,t){var i;for(n.m_tfans.AddVertex(n.m_visitedVertices[1]),i=1;i<t-1;++i)n.m_visitedVertices[n.m_numVisitedVertices++]=n.m_vertexCount,n.m_tfans.AddVertex(n.m_vertexCount++);n.m_tfans.AddVertex(n.m_visitedVertices[0])},8:function(n,t,i){var u,f,r;for(n.m_tfans.AddVertex(n.m_visitedVertices[1]),u=1;u<t-1;++u)f=n.m_ctfans.ReadOperation(n.m_itOperation),f===1?(r=n.m_ctfans.ReadIndex(n.m_itIndex),r<0?n.m_tfans.AddVertex(n.m_visitedVertices[-r-1]):n.m_tfans.AddVertex(r+i)):(n.m_visitedVertices[n.m_numVisitedVertices++]=n.m_vertexCount,n.m_tfans.AddVertex(n.m_vertexCount++));n.m_tfans.AddVertex(n.m_visitedVertices[0])},9:function(n,t,i){for(var f,r,u=0;u<t;++u)f=n.m_ctfans.ReadOperation(n.m_itOperation),f===1?(r=n.m_ctfans.ReadIndex(n.m_itIndex),r<0?n.m_tfans.AddVertex(n.m_visitedVertices[-r-1]):n.m_tfans.AddVertex(r+i)):(n.m_visitedVertices[n.m_numVisitedVertices++]=n.m_vertexCount,n.m_tfans.AddVertex(n.m_vertexCount++))}}},n.TriangleListDecoder.prototype.GetStreamType=function(){return this.m_streamType},n.TriangleListDecoder.prototype.GetReorderTriangles=function(){return this.m_decodeTrianglesOrder},n.TriangleListDecoder.prototype.GetReorderVertices=function(){return this.m_decodeVerticesOrder},n.TriangleListDecoder.prototype.SetStreamType=function(n){this.m_streamType=n},n.TriangleListDecoder.prototype.GetVertexToTriangle=function(){return this.m_vertexToTriangle},n.TriangleListDecoder.prototype.Reorder=function(){var r,o,s,h,e,u,f,t;if(this.m_decodeTrianglesOrder)for(r=this.m_triangles,o=this.m_numTriangles,s=this.m_ctfans.m_trianglesOrder.m_data,u=this.m_tempTriangles,u.set(r),h=0,e=0,t=0;t<o;++t)f=i(s[h++])+e,r[3*f]=u[3*t],r[3*f+1]=u[3*t+1],r[3*f+2]=u[3*t+2],e=f+1;return n.O3DGC_OK},n.TriangleListDecoder.prototype.CompueLocalConnectivityInfo=function(t){var u,i,b,l,k,d,w,a,f,v,y,e,p,o,h,r,c,g,s;for(u=this.m_visitedVertices,i=this.m_visitedVerticesValence,b=this.m_triangles,l=this.m_vertexToTriangle,k=l.Begin(t),d=l.End(t),w=0,f=0,c=0,y=k;c>=0&&y<d;++y)if(c=l.GetNeighbor(y),c>=0)for(++w,g=3*c,p=0;p<3;++p)if(s=b[g+p],s>t){for(a=!1,e=0;e<f;++e)if(s===u[e]){i[e]++;a=!0;break}else if(s<u[e]){for(++f,o=f-1;o>e;--o)u[o]=u[o-1],i[o]=i[o-1];u[e]=s;i[e]=1;a=!0;break}a||(u[f]=s,i[f]=1,f++)}if(f>2)for(h=1;h<f;++h)if(i[h]===1)for(r=h;r>0&&i[r]<i[r-1];)v=i[r],i[r]=i[r-1],i[r-1]=v,v=u[r],u[r]=u[r-1],u[r-1]=v,--r;return this.m_numConqueredTriangles=w,this.m_numVisitedVertices=f,n.O3DGC_OK},n.TriangleListDecoder.prototype.DecompressTFAN=function(t){var u,f,y,p,i,l,w,e,r,b,k,a,g,o,s,h,v,c,d;if(u=this.m_vertexToTriangle,f=this.m_triangles,y=this.m_itDegree,p=this.m_itConfig,i=this.m_tfans,w=this.m_processConfig,e=this.m_ctfans,r=this.m_triangleCount,b=this.m_numConqueredTriangles,l=e.ReadNumTFans(this.m_itNumTFans),l>0)for(v=0;v<l;++v)for(i.AddTFAN(),k=e.ReadDegree(y)+2-b,d=e.ReadConfig(p),a=i.GetNumVertices(),i.AddVertex(t),w[d](this,k,t),g=i.GetNumVertices(),o=i.GetVertex(a+1),c=a+2;c<g;++c)s=i.GetVertex(c),h=r*3,f[h++]=t,f[h++]=o,f[h]=s,u.AddNeighbor(t,r),u.AddNeighbor(o,r),u.AddNeighbor(s,r),o=s,r++;return this.m_triangleCount=r,n.O3DGC_OK},n.TriangleListDecoder.prototype.Decompress=function(){for(var t=0;t<this.m_numVertices;++t)t===this.m_vertexCount&&this.m_vertexCount++,this.CompueLocalConnectivityInfo(t),this.DecompressTFAN(t);return n.O3DGC_OK},n.TriangleListDecoder.prototype.Init=function(t,i,r,u){var f,e;for(this.m_numTriangles=i,this.m_numVertices=r,this.m_triangles=t,this.m_vertexCount=0,this.m_triangleCount=0,this.m_itNumTFans.m_count=0,this.m_itDegree.m_count=0,this.m_itConfig.m_count=0,this.m_itOperation.m_count=0,this.m_itIndex.m_count=0,this.m_numVertices>this.m_maxNumVertices&&(this.m_maxNumVertices=this.m_numVertices,this.m_visitedVerticesValence=new Int32Array(this.m_numVertices),this.m_visitedVertices=new Int32Array(this.m_numVertices)),this.m_decodeTrianglesOrder&&this.m_tempTrianglesSize<this.m_numTriangles&&(this.m_tempTrianglesSize=this.m_numTriangles,this.m_tempTriangles=new Int32Array(3*this.m_tempTrianglesSize)),this.m_ctfans.SetStreamType(this.m_streamType),this.m_ctfans.Allocate(this.m_numVertices,this.m_numTriangles),this.m_tfans.Allocate(2*this.m_numVertices,8*this.m_numVertices),this.m_vertexToTriangle.AllocateNumNeighborsArray(r),e=this.m_vertexToTriangle.GetNumNeighborsBuffer(),f=0;f<r;++f)e[f]=u;return this.m_vertexToTriangle.AllocateNeighborsArray(),this.m_vertexToTriangle.ClearNeighborsArray(),n.O3DGC_OK},n.TriangleListDecoder.prototype.Decode=function(t,i,r,u,f){var e,o;return(e=u.ReadUChar(f,this.m_streamType),this.m_decodeTrianglesOrder=(e&2)!=0,this.m_decodeVerticesOrder=(e&1)!=0,this.m_decodeVerticesOrder)?n.O3DGC_ERROR_NON_SUPPORTED_FEATURE:(o=u.ReadUInt32(f,this.m_streamType),this.Init(t,i,r,o),this.m_ctfans.Load(u,f,this.m_decodeTrianglesOrder,this.m_streamType),this.Decompress(),n.O3DGC_OK)},n.SC3DMCDecoder=function(){var i;for(this.m_iterator=new n.Iterator,this.m_streamSize=0,this.m_params=new n.SC3DMCEncodeParams,this.m_triangleListDecoder=new n.TriangleListDecoder,this.m_quantFloatArray={},this.m_orientation={},this.m_normals={},this.m_quantFloatArraySize=0,this.m_normalsSize=0,this.m_orientationSize=0,this.m_stats=new n.SC3DMCStats,this.m_streamType=t.O3DGC_STREAM_TYPE_UNKOWN,this.m_neighbors=[],this.m_idelta=new Float32Array(t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES),this.m_minNormal=new Float32Array(2),this.m_maxNormal=new Float32Array(2),this.m_minNormal[0]=this.m_minNormal[1]=-2,this.m_maxNormal[0]=this.m_maxNormal[1]=2,i=0;i<t.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES;++i)this.m_neighbors[i]=new n.SC3DMCPredictor},n.SC3DMCDecoder.prototype.GetStats=function(){return this.m_stats},n.SC3DMCDecoder.prototype.DecodeHeader=function(i,r){var h,o,e,f,u,s;if(h=this.m_iterator.m_count,o=r.ReadUInt32(this.m_iterator,t.O3DGC_STREAM_TYPE_BINARY),o!==t.O3DGC_SC3DMC_START_CODE){if(this.m_iterator.m_count=h,o=r.ReadUInt32(this.m_iterator,t.O3DGC_STREAM_TYPE_ASCII),o!==t.O3DGC_SC3DMC_START_CODE)return n.O3DGC_ERROR_CORRUPTED_STREAM;this.m_streamType=t.O3DGC_STREAM_TYPE_ASCII}else this.m_streamType=t.O3DGC_STREAM_TYPE_BINARY;if(this.m_streamSize=r.ReadUInt32(this.m_iterator,this.m_streamType),this.m_params.SetEncodeMode(r.ReadUChar(this.m_iterator,this.m_streamType)),i.SetCreaseAngle(r.ReadFloat32(this.m_iterator,this.m_streamType)),e=r.ReadUChar(this.m_iterator,this.m_streamType),i.SetCCW((e&1)==1),i.SetSolid((e&2)==1),i.SetConvex((e&4)==1),i.SetIsTriangularMesh((e&8)==1),i.SetNCoord(r.ReadUInt32(this.m_iterator,this.m_streamType)),i.SetNNormal(r.ReadUInt32(this.m_iterator,this.m_streamType)),i.SetNumFloatAttributes(r.ReadUInt32(this.m_iterator,this.m_streamType)),i.SetNumIntAttributes(r.ReadUInt32(this.m_iterator,this.m_streamType)),i.GetNCoord()>0){for(i.SetNCoordIndex(r.ReadUInt32(this.m_iterator,this.m_streamType)),f=0;f<3;++f)i.SetCoordMin(f,r.ReadFloat32(this.m_iterator,this.m_streamType)),i.SetCoordMax(f,r.ReadFloat32(this.m_iterator,this.m_streamType));this.m_params.SetCoordQuantBits(r.ReadUChar(this.m_iterator,this.m_streamType))}if(i.GetNNormal()>0){for(i.SetNNormalIndex(r.ReadUInt32(this.m_iterator,this.m_streamType)),f=0;f<3;++f)i.SetNormalMin(f,r.ReadFloat32(this.m_iterator,this.m_streamType)),i.SetNormalMax(f,r.ReadFloat32(this.m_iterator,this.m_streamType));i.SetNormalPerVertex(r.ReadUChar(this.m_iterator,this.m_streamType)===1);this.m_params.SetNormalQuantBits(r.ReadUChar(this.m_iterator,this.m_streamType))}for(u=0;u<i.GetNumFloatAttributes();++u)if(i.SetNFloatAttribute(u,r.ReadUInt32(this.m_iterator,this.m_streamType)),i.GetNFloatAttribute(u)>0){for(i.SetNFloatAttributeIndex(u,r.ReadUInt32(this.m_iterator,this.m_streamType)),s=r.ReadUChar(this.m_iterator,this.m_streamType),i.SetFloatAttributeDim(u,s),f=0;f<s;++f)i.SetFloatAttributeMin(u,f,r.ReadFloat32(this.m_iterator,this.m_streamType)),i.SetFloatAttributeMax(u,f,r.ReadFloat32(this.m_iterator,this.m_streamType));i.SetFloatAttributePerVertex(u,r.ReadUChar(this.m_iterator,this.m_streamType)===1);i.SetFloatAttributeType(u,r.ReadUChar(this.m_iterator,this.m_streamType));this.m_params.SetFloatAttributeQuantBits(u,r.ReadUChar(this.m_iterator,this.m_streamType))}for(u=0;u<i.GetNumIntAttributes();++u)i.SetNIntAttribute(u,r.ReadUInt32(this.m_iterator,this.m_streamType)),i.GetNIntAttribute(u)>0&&(i.SetNIntAttributeIndex(u,r.ReadUInt32(this.m_iterator,this.m_streamType)),i.SetIntAttributeDim(u,r.ReadUChar(this.m_iterator,this.m_streamType)),i.SetIntAttributePerVertex(u,r.ReadUChar(this.m_iterator,this.m_streamType)===1),i.SetIntAttributeType(u,r.ReadUChar(this.m_iterator,this.m_streamType)));return n.O3DGC_OK},n.SC3DMCDecoder.prototype.DecodeIntArrayBinary=function(i,u,f,e,o,s,h){var ht,ct,c,tt,rt,lt,at,vt,a,ut,y,v,p,w,ft,d,yt,pt,kt,wt,b,et,bt,ot,g,k,dt,nt,st,gt,it,l;if(a=this.m_iterator,ut=this.m_streamType,v=new n.ArithmeticDecoder,p=new n.StaticBitModel,w=new n.AdaptiveBitModel,ft=new n.AdaptiveDataModel,ft.SetAlphabet(t.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS+1),d=this.m_triangleListDecoder.GetVertexToTriangle(),yt=d.m_neighbors,pt=o.GetCoordIndex(),kt=u*f,wt=a.m_count,b=h.ReadUInt32(a,ut),et=h.ReadUChar(a,ut),bt=et>>>4&7,s.m_value=et&7,b-=a.m_count-wt,ot=new n.Iterator,ot.m_count=a.m_count+b,g=0,k=0,dt=new n.SC3DMCTriplet(-1,-1,-1),bt!==t.O3DGC_SC3DMC_BINARIZATION_AC_EGC)return n.O3DGC_ERROR_CORRUPTED_STREAM;for(vt=h.GetBuffer(a,b),a.m_count+=b,v.SetBuffer(b,vt),v.StartDecoder(),g=v.ExpGolombDecode(0,p,w),k=v.ExpGolombDecode(0,p,w),nt=new n.AdaptiveDataModel,nt.SetAlphabet(k+2),st=this.m_neighbors,gt=this.m_normals,it=new n.NumberRef,ht=s.m_value!==t.O3DGC_SC3DMC_NO_PREDICTION,l=0;l<u;++l){if(it.m_value=0,d.GetNumNeighbors(l)>0&&ht)for(lt=d.Begin(l),at=d.End(l),tt=lt;tt<at;++tt){if(rt=yt[tt],rt<0)break;r(pt,rt,l,it,st,f,i,e)}if(it.m_value>1)for(ct=v.DecodeAdaptiveDataModel(ft),c=0;c<f;++c)y=v.DecodeIntACEGC(nt,p,w,g,k),i[l*e+c]=y+st[ct].m_pred[c];else if(l>0&&s.m_value!==t.O3DGC_SC3DMC_NO_PREDICTION)for(c=0;c<f;++c)y=v.DecodeIntACEGC(nt,p,w,g,k),i[l*e+c]=y+i[(l-1)*e+c];else for(c=0;c<f;++c)y=v.DecodeUIntACEGC(nt,p,w,g,k),i[l*e+c]=y}return a.m_count=ot.m_count,n.O3DGC_OK},n.SC3DMCDecoder.prototype.DecodeIntArrayASCII=function(i,u,f,e,o,s,h){var it,a,w,v,y,rt,ut,ct,ft,d,g,et,p,lt,nt,at,b,l,ot,st,k,tt,c,ht;if(a=this.m_iterator,w=this.m_streamType,y=this.m_triangleListDecoder.GetVertexToTriangle(),rt=y.m_neighbors,ut=o.GetCoordIndex(),ct=u*f,ft=a.m_count,d=h.ReadUInt32(a,w),g=h.ReadUChar(a,w),et=g>>>4&7,s.m_value=g&7,d-=a.m_count-ft,p=new n.Iterator,p.m_count=a.m_count+d,lt=new n.SC3DMCTriplet(-1,-1,-1),et!==t.O3DGC_SC3DMC_BINARIZATION_ASCII)return n.O3DGC_ERROR_CORRUPTED_STREAM;for(h.ReadUInt32(p,w),nt=this.m_neighbors,at=this.m_normals,b=new n.NumberRef,it=s.m_value!==t.O3DGC_SC3DMC_NO_PREDICTION,l=0;l<u;++l){if(b.m_value=0,y.GetNumNeighbors(l)>0&&it)for(ot=y.Begin(l),st=y.End(l),k=ot;k<st;++k){if(tt=rt[k],tt<0)break;r(ut,tt,l,b,nt,f,i,e)}if(b.m_value>1)for(ht=h.ReadUCharASCII(p),c=0;c<f;++c)v=h.ReadIntASCII(a),i[l*e+c]=v+nt[ht].m_pred[c];else if(l>0&&s.m_value!==t.O3DGC_SC3DMC_NO_PREDICTION)for(c=0;c<f;++c)v=h.ReadIntASCII(a),i[l*e+c]=v+i[(l-1)*e+c];else for(c=0;c<f;++c)v=h.ReadUIntASCII(a),i[l*e+c]=v}return a.m_count=p.m_count,n.O3DGC_OK},n.SC3DMCDecoder.prototype.DecodeIntArray=function(n,i,r,u,f,e,o){return this.m_streamType===t.O3DGC_STREAM_TYPE_ASCII?this.DecodeIntArrayASCII(n,i,r,u,f,e,o):this.DecodeIntArrayBinary(n,i,r,u,f,e,o)},n.SC3DMCDecoder.prototype.ProcessNormals=function(t){var o,h,l,a,r,b,v,k,i,f,u,y,p,w,e;for(l=t.GetNNormal(),a=t.GetNNormal()*3,this.m_normalsSize<a&&(this.m_normalsSize=a,this.m_normals=new Float32Array(this.m_normalsSize)),r=this.m_normals,b=this.m_quantFloatArray,v=this.m_orientation,k=t.GetCoordIndex(),c(k,t.GetNCoordIndex(),b,l,r),i=new n.Vec3,f=new n.Vec3,u=0;u<l;++u)o=3*u,i.m_x=r[o],i.m_y=r[o+1],i.m_z=r[o+2],e=Math.sqrt(i.m_x*i.m_x+i.m_y*i.m_y+i.m_z*i.m_z),e===0&&(e=1),s(i,f),y=f.m_x/e,p=f.m_y/e,w=f.m_z+v[u],v[u]=w,w>>>1!=f.m_z>>>1&&(y=0,p=0),h=u*2,r[h]=y,r[h+1]=p;return n.O3DGC_OK},n.SC3DMCDecoder.prototype.IQuantize=function(i,r,u,f,e,o,s,h){var c,l,a,y,v,p;if(h.m_value===t.O3DGC_SC3DMC_SURF_NORMALS_PREDICTION)for(p=t.CubeToSphere,y=this.m_orientation,v=this.m_normals,l=new n.Vec3(0,0,0),a=new n.Vec3(0,0,0),this.IQuantizeFloatArray(i,r,u,f,this.m_minNormal,this.m_maxNormal,s+1),c=0;c<r;++c)l.m_x=i[f*c]+v[2*c],l.m_y=i[f*c+1]+v[2*c+1],l.m_z=y[c],p[l.m_z](l,a),i[f*c]=a.m_x,i[f*c+1]=a.m_y,i[f*c+2]=a.m_z;else this.IQuantizeFloatArray(i,r,u,f,e,o,s)},n.SC3DMCDecoder.prototype.DecodeFloatArrayBinary=function(u,f,o,s,h,c,l,a,v,y){var vt,yt,ri,ui,pt,fi,g,lt,si,nt,tt,p,w,d,wt,bt,k,kt,dt,it,b,rt,ut,gt,ft,at,ni,st,ei,et,ti,oi,ii,ht,ot,ct;if(k=this.m_iterator,kt=this.m_orientation,dt=this.m_streamType,b=new n.ArithmeticDecoder,rt=new n.StaticBitModel,ut=new n.AdaptiveBitModel,gt=new n.AdaptiveDataModel,vt=t.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS,gt.SetAlphabet(vt+1),ft=this.m_triangleListDecoder.GetVertexToTriangle(),at=ft.m_neighbors,ni=a.GetCoordIndex(),st=f*o,ei=k.m_count,et=y.ReadUInt32(k,dt),ti=y.ReadUChar(k,dt),oi=ti>>>4&7,v.m_value=ti&7,et-=k.m_count-ei,ii=new n.Iterator,ii.m_count=k.m_count+et,ht=0,ot=0,oi!==t.O3DGC_SC3DMC_BINARIZATION_AC_EGC)return n.O3DGC_ERROR_CORRUPTED_STREAM;if(fi=y.GetBuffer(k,et),k.m_count+=et,b.SetBuffer(et,fi),b.StartDecoder(),ht=b.ExpGolombDecode(0,rt,ut),ot=b.ExpGolombDecode(0,rt,ut),ct=new n.AdaptiveDataModel,ct.SetAlphabet(ot+2),v.m_value===t.O3DGC_SC3DMC_SURF_NORMALS_PREDICTION){for(this.m_orientationSize<st&&(this.m_orientationSize=st,this.m_orientation=new Int8Array(this.m_orientationSize),kt=this.m_orientation),pt=new n.AdaptiveDataModel,pt.SetAlphabet(12),p=0;p<f;++p)kt[p]=i(b.DecodeAdaptiveDataModel(pt));this.ProcessNormals(a);o=2}for(this.m_quantFloatArraySize<st&&(this.m_quantFloatArraySize=st,this.m_quantFloatArray=new Int32Array(this.m_quantFloatArraySize)),g=this.m_quantFloatArray,lt=this.m_neighbors,si=this.m_normals,nt=new n.NumberRef,yt=v.m_value!==t.O3DGC_SC3DMC_NO_PREDICTION,ri=v.m_value===t.O3DGC_SC3DMC_PARALLELOGRAM_PREDICTION,w=0;w<f;++w){if(nt.m_value=0,ft.GetNumNeighbors(w)>0&&yt){if(wt=ft.Begin(w),bt=ft.End(w),ri)for(d=wt;d<bt;++d){if(tt=at[d],tt<0)break;e(ni,tt,w,nt,lt,o,g,s,ft,at)}if(nt.m_value<vt)for(d=wt;d<bt;++d){if(tt=at[d],tt<0)break;r(ni,tt,w,nt,lt,o,g,s)}}if(nt.m_value>1)for(ui=b.DecodeAdaptiveDataModel(gt),p=0;p<o;++p)it=b.DecodeIntACEGC(ct,rt,ut,ht,ot),g[w*s+p]=it+lt[ui].m_pred[p];else if(w>0&&yt)for(p=0;p<o;++p)it=b.DecodeIntACEGC(ct,rt,ut,ht,ot),g[w*s+p]=it+g[(w-1)*s+p];else for(p=0;p<o;++p)it=b.DecodeUIntACEGC(ct,rt,ut,ht,ot),g[w*s+p]=it}return k.m_count=ii.m_count,this.IQuantize(u,f,o,s,h,c,l,v),n.O3DGC_OK},n.SC3DMCDecoder.prototype.DecodeFloatArrayASCII=function(i,u,f,o,s,h,c,l,a,v){var vt,yt,pt,w,et,rt,d,g,ut,ot,st,wt,ht,ct,bt,it,k,ft,dt,nt,p,b,lt,at,tt,y,kt;if(vt=t.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS,w=this.m_iterator,et=this.m_orientation,rt=this.m_streamType,g=this.m_triangleListDecoder.GetVertexToTriangle(),ut=g.m_neighbors,ot=l.GetCoordIndex(),st=u*f,wt=w.m_count,ht=v.ReadUInt32(w,rt),ct=v.ReadUChar(w,rt),bt=ct>>>4&7,a.m_value=ct&7,ht-=w.m_count-wt,it=new n.Iterator,it.m_count=w.m_count+ht,bt!==t.O3DGC_SC3DMC_BINARIZATION_ASCII)return n.O3DGC_ERROR_CORRUPTED_STREAM;if(v.ReadUInt32(it,rt),a.m_value===t.O3DGC_SC3DMC_SURF_NORMALS_PREDICTION){for(this.m_orientationSize<u&&(this.m_orientationSize=u,this.m_orientation=new Int8Array(this.m_orientationSize),et=this.m_orientation),y=0;y<u;++y)et[y]=v.ReadIntASCII(w);this.ProcessNormals(l);f=2}for(this.m_quantFloatArraySize<st&&(this.m_quantFloatArraySize=st,this.m_quantFloatArray=new Int32Array(this.m_quantFloatArraySize)),k=this.m_quantFloatArray,ft=this.m_neighbors,dt=this.m_normals,nt=new n.NumberRef,yt=a.m_value!==t.O3DGC_SC3DMC_NO_PREDICTION,pt=a.m_value===t.O3DGC_SC3DMC_PARALLELOGRAM_PREDICTION,p=0;p<u;++p){if(nt.m_value=0,g.GetNumNeighbors(p)>0&&yt){if(lt=g.Begin(p),at=g.End(p),pt)for(b=lt;b<at;++b){if(tt=ut[b],tt<0)break;e(ot,tt,p,nt,ft,f,k,o,g,ut)}if(nt.m_value<vt)for(b=lt;b<at;++b){if(tt=ut[b],tt<0)break;r(ot,tt,p,nt,ft,f,k,o)}}if(nt.m_value>1)for(kt=v.ReadUCharASCII(it),y=0;y<f;++y)d=v.ReadIntASCII(w),k[p*o+y]=d+ft[kt].m_pred[y];else if(p>0&&a.m_value!==t.O3DGC_SC3DMC_NO_PREDICTION)for(y=0;y<f;++y)d=v.ReadIntASCII(w),k[p*o+y]=d+k[(p-1)*o+y];else for(y=0;y<f;++y)d=v.ReadUIntASCII(w),k[p*o+y]=d}return w.m_count=it.m_count,this.IQuantize(i,u,f,o,s,h,c,a),n.O3DGC_OK},n.SC3DMCDecoder.prototype.DecodeFloatArray=function(n,i,r,u,f,e,o,s,h,c){return this.m_streamType===t.O3DGC_STREAM_TYPE_ASCII?this.DecodeFloatArrayASCII(n,i,r,u,f,e,o,s,h,c):this.DecodeFloatArrayBinary(n,i,r,u,f,e,o,s,h,c)},n.SC3DMCDecoder.prototype.IQuantizeFloatArray=function(t,i,r,u,f,e,o){var c,a,s,l,h;for(c=this.m_idelta,a=this.m_quantFloatArray,s=0;s<r;++s)l=e[s]-f[s],c[s]=l>0?l/((1<<o>>>0)-1):1;for(h=0;h<i;++h)for(s=0;s<r;++s)t[h*u+s]=a[h*u+s]*c[s]+f[s];return n.O3DGC_OK},n.SC3DMCDecoder.prototype.DecodePlayload=function(t,i){var h,o,u,s,f,e,r;if((h=this.m_params,o=this.m_iterator,u=this.m_stats,s=new n.NumberRef,f=new n.Timer,e=n.O3DGC_OK,this.m_triangleListDecoder.SetStreamType(this.m_streamType),u.m_streamSizeCoordIndex=o.m_count,f.Tic(),this.m_triangleListDecoder.Decode(t.GetCoordIndex(),t.GetNCoordIndex(),t.GetNCoord(),i,o),f.Toc(),u.m_timeCoordIndex=f.GetElapsedTime(),u.m_streamSizeCoordIndex=o.m_count-u.m_streamSizeCoordIndex,u.m_streamSizeCoord=o.m_count,f.Tic(),t.GetNCoord()>0&&(e=this.DecodeFloatArray(t.GetCoord(),t.GetNCoord(),3,3,t.GetCoordMinArray(),t.GetCoordMaxArray(),h.GetCoordQuantBits(),t,s,i),h.SetCoordPredMode(s.m_value)),e!==n.O3DGC_OK)||(f.Toc(),u.m_timeCoord=f.GetElapsedTime(),u.m_streamSizeCoord=o.m_count-u.m_streamSizeCoord,u.m_streamSizeNormal=o.m_count,f.Tic(),t.GetNNormal()>0&&(e=this.DecodeFloatArray(t.GetNormal(),t.GetNNormal(),3,3,t.GetNormalMinArray(),t.GetNormalMaxArray(),h.GetNormalQuantBits(),t,s,i),h.SetNormalPredMode(s.m_value)),e!==n.O3DGC_OK))return e;for(f.Toc(),u.m_timeNormal=f.GetElapsedTime(),u.m_streamSizeNormal=o.m_count-u.m_streamSizeNormal,r=0;r<t.GetNumFloatAttributes();++r)u.m_streamSizeFloatAttribute[r]=o.m_count,f.Tic(),e=this.DecodeFloatArray(t.GetFloatAttribute(r),t.GetNFloatAttribute(r),t.GetFloatAttributeDim(r),t.GetFloatAttributeDim(r),t.GetFloatAttributeMinArray(r),t.GetFloatAttributeMaxArray(r),h.GetFloatAttributeQuantBits(r),t,s,i),h.SetFloatAttributePredMode(r,s.m_value),f.Toc(),u.m_timeFloatAttribute[r]=f.GetElapsedTime(),u.m_streamSizeFloatAttribute[r]=o.m_count-u.m_streamSizeFloatAttribute[r];if(e!==n.O3DGC_OK)return e;for(r=0;r<t.GetNumIntAttributes();++r)u.m_streamSizeIntAttribute[r]=o.m_count,f.Tic(),e=this.DecodeIntArray(t.GetIntAttribute(r),t.GetNIntAttribute(r),t.GetIntAttributeDim(r),t.GetIntAttributeDim(r),t,s,i),h.SetIntAttributePredMode(r,s.m_value),f.Toc(),u.m_timeIntAttribute[r]=f.GetElapsedTime(),u.m_streamSizeIntAttribute[r]=o.m_count-u.m_streamSizeIntAttribute[r];return e!==n.O3DGC_OK?e:(f.Tic(),this.m_triangleListDecoder.Reorder(),f.Toc(),u.m_timeReorder=f.GetElapsedTime(),e)},n.DVEncodeParams=function(){this.m_encodeMode=t.O3DGC_DYNAMIC_VECTOR_ENCODE_MODE_LIFT;this.m_streamTypeMode=t.O3DGC_STREAM_TYPE_ASCII;this.m_quantBits=10},n.DVEncodeParams.prototype.GetStreamType=function(){return this.m_streamTypeMode},n.DVEncodeParams.prototype.GetEncodeMode=function(){return this.m_encodeMode},n.DVEncodeParams.prototype.GetQuantBits=function(){return this.m_quantBits},n.DVEncodeParams.prototype.SetStreamType=function(n){this.m_streamTypeMode=n},n.DVEncodeParams.prototype.SetEncodeMode=function(n){this.m_encodeMode=n},n.DVEncodeParams.prototype.SetQuantBits=function(n){this.m_quantBits=n},n.DynamicVector=function(){this.m_num=0;this.m_dim=0;this.m_stride=0;this.m_max={};this.m_min={};this.m_vectors={}},n.DynamicVector.prototype.GetNVector=function(){return this.m_num},n.DynamicVector.prototype.GetDimVector=function(){return this.m_dim},n.DynamicVector.prototype.GetStride=function(){return this.m_stride},n.DynamicVector.prototype.GetMinArray=function(){return this.m_min},n.DynamicVector.prototype.GetMaxArray=function(){return this.m_max},n.DynamicVector.prototype.GetVectors=function(){return this.m_vectors},n.DynamicVector.prototype.GetMin=function(n){return this.m_min[n]},n.DynamicVector.prototype.GetMax=function(n){return this.m_max[n]},n.DynamicVector.prototype.SetNVector=function(n){this.m_num=n},n.DynamicVector.prototype.SetDimVector=function(n){this.m_dim=n},n.DynamicVector.prototype.SetStride=function(n){this.m_stride=n},n.DynamicVector.prototype.SetMinArray=function(n){this.m_min=n},n.DynamicVector.prototype.SetMaxArray=function(n){this.m_max=n},n.DynamicVector.prototype.SetMin=function(n,t){this.m_min[n]=t},n.DynamicVector.prototype.SetMax=function(n,t){this.m_max[n]=t},n.DynamicVector.prototype.SetVectors=function(n){this.m_vectors=n},n.DynamicVectorDecoder=function(){this.m_streamSize=0;this.m_maxNumVectors=0;this.m_numVectors=0;this.m_dimVectors=0;this.m_quantVectors={};this.m_iterator=new n.Iterator;this.m_streamType=t.O3DGC_STREAM_TYPE_UNKOWN;this.m_params=new n.DVEncodeParams},n.DynamicVectorDecoder.prototype.GetStreamType=function(){return this.m_streamType},n.DynamicVectorDecoder.prototype.GetIterator=function(){return this.m_iterator},n.DynamicVectorDecoder.prototype.SetStreamType=function(n){this.m_streamType=n},n.DynamicVectorDecoder.prototype.SetIterator=function(n){this.m_iterator=n},n.DynamicVectorDecoder.prototype.IUpdate=function(t,i,r){var u,f;for(f=r-1,u=2,t[i]-=t[i+1]>>1;u<f;)t[i+u]-=t[i+u-1]+t[i+u+1]+2>>2,u+=2;return u===f&&(t[i+u]-=t[i+u-1]>>1),n.O3DGC_OK},n.DynamicVectorDecoder.prototype.IPredict=function(t,i,r){for(var f=r-1,u=1;u<f;)t[i+u]+=t[i+u-1]+t[i+u+1]+1>>1,u+=2;return u===f&&(t[i+u]+=t[i+u-1]),n.O3DGC_OK},n.DynamicVectorDecoder.prototype.Merge=function(t,i,r){var u,e,f,o,s;for(e=(r>>1)+(r&1),f=e-1,o=e;f>0;){for(u=f;u<o;u+=2)s=t[i+u],t[i+u]=t[i+u+1],t[i+u+1]=s;--f;++o}return n.O3DGC_OK},n.DynamicVectorDecoder.prototype.ITransform=function(t,i,r){var u,f,e,o;for(u=r,f=0,e=0,f+=(u&1)<<e++>>>0;u>1;)u=(u>>1)+((u&1)>>>0),f+=(u&1)<<e++>>>0;for(o=e-2;o>=0;--o)u=(u<<1>>>0)-(f>>>o&1)>>>0,this.Merge(t,i,u),this.IUpdate(t,i,u),this.IPredict(t,i,u);return n.O3DGC_OK},n.DynamicVectorDecoder.prototype.IQuantize=function(t,i,r,u,f,e,o){var l,c,a,v,s,h;for(l=this.m_quantVectors,v=i*r,s=0;s<r;++s)for(c=e[s]-f[s],a=c>0?c/((1<<o>>>0)-1):1,h=0;h<i;++h)t[h*u+s]=l[h+s*i]*a+f[s];return n.O3DGC_OK},n.DynamicVectorDecoder.prototype.DecodeHeader=function(i,r){var u,o,e,f;if(u=this.m_iterator,o=u.m_count,e=r.ReadUInt32(u,t.O3DGC_STREAM_TYPE_BINARY),e!==t.O3DGC_DV_START_CODE){if(u.m_count=o,e=r.ReadUInt32(u,t.O3DGC_STREAM_TYPE_ASCII),e!==t.O3DGC_DV_START_CODE)return n.O3DGC_ERROR_CORRUPTED_STREAM;this.m_streamType=t.O3DGC_STREAM_TYPE_ASCII}else this.m_streamType=t.O3DGC_STREAM_TYPE_BINARY;return f=this.m_streamType,this.m_streamSize=r.ReadUInt32(u,f),this.m_params.SetEncodeMode(r.ReadUChar(u,f)),i.SetNVector(r.ReadUInt32(u,f)),i.GetNVector()>0&&(i.SetDimVector(r.ReadUInt32(u,f)),this.m_params.SetQuantBits(r.ReadUChar(u,f))),n.O3DGC_OK},n.DynamicVectorDecoder.prototype.DecodePlayload=function(i,r){var b,f,s,g,nt,l,h,e,a,c,v,y,k,p,tt,d,w,o,u;for(f=this.m_iterator,s=this.m_streamType,g=n.O3DGC_OK,nt=f.m_count,l=r.ReadUInt32(f,s),h=i.GetDimVector(),e=i.GetNVector(),b=h*e,a=0;a<i.GetDimVector();++a)i.SetMin(a,r.ReadFloat32(f,s)),i.SetMax(a,r.ReadFloat32(f,s));if(c=new n.ArithmeticDecoder,v=new n.StaticBitModel,y=new n.AdaptiveBitModel,l-=f.m_count-nt,k=0,p=0,s===t.O3DGC_STREAM_TYPE_BINARY&&(tt=r.GetBuffer(f,l),f.m_count+=l,c.SetBuffer(l,tt),c.StartDecoder(),k=c.ExpGolombDecode(0,v,y),p=c.ExpGolombDecode(0,v,y)),d=new n.AdaptiveDataModel,d.SetAlphabet(p+2),this.m_maxNumVectors<b&&(this.m_maxNumVectors=b,this.m_quantVectors=new Int32Array(this.m_maxNumVectors)),w=this.m_quantVectors,s===t.O3DGC_STREAM_TYPE_ASCII)for(o=0;o<e;++o)for(u=0;u<h;++u)w[u*e+o]=r.ReadIntASCII(f);else for(o=0;o<e;++o)for(u=0;u<h;++u)w[u*e+o]=c.DecodeIntACEGC(d,v,y,k,p);for(u=0;u<h;++u)this.ITransform(w,u*e,e);return this.IQuantize(i.GetVectors(),e,h,i.GetStride(),i.GetMinArray(),i.GetMaxArray(),this.m_params.GetQuantBits()),g},n}();S3D=S3D||{};S3D.S3DLoader=function(){this.ifs=new o3dgc.IndexedFaceSet};S3D.S3DLoader.prototype={constructor:S3D.S3DLoader,destroy:function(){this.ifs=null},position:function(){return this.ifs.GetCoord()},index:function(){return this.ifs.GetCoordIndex()},vertexCount:function(){return this.ifs.GetNCoord()},faceCount:function(){return this.ifs.GetNCoordIndex()},parse:function(n){var t=this.ifs,u=new o3dgc.BinaryStream(n),s=n.byteLength,r=new o3dgc.SC3DMCDecoder,o,f,e,i;for(r.DecodeHeader(t,u),o=r.m_iterator.m_count,t.GetNCoordIndex()>0&&t.SetCoordIndex(new Uint32Array(3*t.GetNCoordIndex())),t.GetNCoord()>0&&t.SetCoord(new Float32Array(3*t.GetNCoord())),t.GetNNormal()>0&&t.SetNormal(new Float32Array(3*t.GetNNormal())),f=t.GetNumFloatAttributes(),i=0;i<f;++i)t.GetNFloatAttribute(i)>0&&t.SetFloatAttribute(i,new Float32Array(t.GetFloatAttributeDim(i)*t.GetNFloatAttribute(i)));for(e=t.GetNumIntAttributes(),i=0;i<e;++i)t.GetNIntAttribute(i)>0&&t.SetIntAttribute(i,new Int32Array(t.GetIntAttributeDim(i)*t.GetNIntAttribute(i)));r.DecodePlayload(t,u)},load:function(n,t){var r=this,i=new XMLHttpRequest;i.open("GET",n,!0);i.responseType="arraybuffer";i.onload=function(){r.parse(i.response);t()};i.send(null)}};self.onmessage=function(n){var r=[],u=n.data.offsets,s=n.data.data,f,t,i,e,o;for(f in u)t=u[f],i=new S3D.S3DLoader,i.parse(s.slice(t.offset,t.offset+t.size)),e=i.index(),o=i.position(),r.push([e,o]);self.postMessage(r);self.close()};